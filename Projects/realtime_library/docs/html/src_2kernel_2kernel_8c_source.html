<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>realtime_library: /media/sf_ezs_ss25/Projects/realtime_library/src/kernel/kernel.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">realtime_library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('src_2kernel_2kernel_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">kernel.c</div></div>
</div><!--header-->
<div class="contents">
<a href="src_2kernel_2kernel_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="comment">/* Includes */</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#include &quot;<a class="code" href="kernel_8h.html">kernel/kernel.h</a>&quot;</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">#include &quot;<a class="code" href="support_8h.html">utils/support.h</a>&quot;</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="comment">/* Preprocessor defines */</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment">/* Preprocessor macros */</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">/* Module intern type definitions */</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">/* Static module variables */</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">// tasks</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">extern</span> <a class="code hl_struct" href="structtask__t.html">task_t</a>                   *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="keyword">extern</span> <a class="code hl_struct" href="structtask__t.html">task_t</a>                   *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7901950415e33fca551eaf4d1653ed13">g_running_task_next</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">extern</span> <a class="code hl_struct" href="structdictionary__t.html">dictionary_t</a>             *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">   75</a></span><a class="code hl_struct" href="structdictionary__t.html">dictionary_t</a>                    *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>                    = NULL;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">   76</a></span><a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>                   *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>                    = NULL;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="keyword">extern</span> <a class="code hl_struct" href="structelement.html">linked_list_element_t</a>    *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="keyword">extern</span> <a class="code hl_struct" href="structelement.html">linked_list_element_t</a>    *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a0af8b83c448299a32985cf85b970a9be">g_linked_list_task_iterator_next</a>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="keyword">extern</span> <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>            *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#af2a34ea23217c5e3ac0f09b2fe9802cd">   80</a></span><span class="keywordtype">size_t</span>                          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af2a34ea23217c5e3ac0f09b2fe9802cd">g_task_lower_priority</a>               = 0;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">   81</a></span><span class="keywordtype">size_t</span>                          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">g_task_lowest_priority</a>              = 0;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="keyword">extern</span> uint8_t                  <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a32c6a247d7774b1962eafa56fd521dd7">g_dictionary_priority</a>;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="keyword">extern</span> uint8_t                  <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a105788c2e945106a04bcc0ae7dada0e2">g_dictionary_priority_next</a>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="keyword">extern</span> <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>            *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a269a52e775212b39ab9b36749e8c784f">g_priority_group_next</a>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a303f92a941c5493399c334cdb3ee468d">   85</a></span><span class="keywordtype">size_t</span>                          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a303f92a941c5493399c334cdb3ee468d">g_available_tasks</a>                   = 0;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="comment">// message queues</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">   88</a></span><a class="code hl_struct" href="structdictionary__t.html">dictionary_t</a>                    *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>               = NULL;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">   89</a></span><span class="keywordtype">size_t</span>                          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a>                 = 0;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="comment">// semaphores</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">   92</a></span><a class="code hl_struct" href="structdictionary__t.html">dictionary_t</a>                    *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>                   = NULL;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">   93</a></span><span class="keywordtype">size_t</span>                          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a>                     = 0;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment">// mutexes</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">   96</a></span><a class="code hl_struct" href="structdictionary__t.html">dictionary_t</a>                    *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>                       = NULL;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">   97</a></span><span class="keywordtype">size_t</span>                          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a>                         = 0;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// kernel</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="keyword">extern</span> <a class="code hl_enumeration" href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2">Kernel_Status_e</a>          <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab7526169fb1376f757c464e93703a83e">g_kernel_status</a>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">  101</a></span><span class="keywordtype">bool</span>                            <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a>    = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">  102</a></span><a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>                   *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>                    = NULL;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a7dc0730fdfa63247d899c6dae2681da0">  103</a></span><a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>                   *<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7dc0730fdfa63247d899c6dae2681da0">g_terminated_tasks_list</a>            = NULL;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment">/* Static module functions (prototypes) */</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="keyword">extern</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a82d3d38923c236ae08d1e1171ef761db">kernel_start_task</a>(<a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>** priority_group, <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> **linked_list_element, <a class="code hl_struct" href="structtask__t.html">task_t</a> **task);</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="keyword">extern</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(<a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>** priority_group, <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> **linked_list_element, <a class="code hl_struct" href="structtask__t.html">task_t</a> **task);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="keyword">extern</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac27d4440da0880ea8d551dbf82a88a58">kernel_set_status</a>(<a class="code hl_enumeration" href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2">Kernel_Status_e</a> status);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="keyword">extern</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2e52dedad3cf7d714060e64727c82aa6">kernel_set_stack_pointer</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="keywordtype">void</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(<a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> **source, <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> **<a class="code hl_struct" href="structelement.html">element</a>, <a class="code hl_struct" href="structtask__t.html">task_t</a> **task);</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#aecc1d7602ec2800fcdc0d31d35a7a379">  115</a></span><span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#aecc1d7602ec2800fcdc0d31d35a7a379">kernel_set_system_functions</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#af0b12129cd39d874bfebcc424b723b5d">  116</a></span><span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#af0b12129cd39d874bfebcc424b723b5d">kernel_task_terminate</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">/* Public functions */</span></div>
<div class="foldopen" id="foldopen00134" data-start="{" data-end="}">
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#aec0bced571e65dd4a100363886119ca2">  134</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#aec0bced571e65dd4a100363886119ca2">kernel_init</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// set relevant system functions, depending on the used platform</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#aecc1d7602ec2800fcdc0d31d35a7a379">kernel_set_system_functions</a>();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">// create prioritized task list with groups</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#a004a569e92c8b61b43e2c1aeb9635c10">dictionary_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, <a class="code hl_define" href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a>);</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ae6c6e53a9532c82a1ba22e0ea8b8f155">KERNEL_NO_PRIORITIZED_TASKS</a>);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="comment">// add priority groups to priority list</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> *priority_group = NULL;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> priority = 0; priority&lt;<a class="code hl_define" href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a>; priority++) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        status = <a class="code hl_function" href="linked__list_8c.html#ab84dc67b6f40f1f88c3b516453c0115e">linked_list_create</a>(&amp;priority_group);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ae6c6e53a9532c82a1ba22e0ea8b8f155">KERNEL_NO_PRIORITIZED_TASKS</a>);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        status = <a class="code hl_function" href="dictionary_8c.html#aa2e04eccac802b9fc8101d518979b733">dictionary_add</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, priority, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ae6c6e53a9532c82a1ba22e0ea8b8f155">KERNEL_NO_PRIORITIZED_TASKS</a>);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    }</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="comment">// create dictionary which lists all tasks by there linked list element</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    status = <a class="code hl_function" href="dictionary_8c.html#a004a569e92c8b61b43e2c1aeb9635c10">dictionary_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>, <a class="code hl_define" href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a>);</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a3c501276ec5c9892620f2efebb55ead2">KERNEL_NO_LIST_OF_TASKS</a>);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    }</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="comment">// create linked list which lists all delayed tasks</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    status = <a class="code hl_function" href="linked__list_8c.html#ab84dc67b6f40f1f88c3b516453c0115e">linked_list_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#abac08fa584d68909fa4a2e9dde23b014">KERNEL_NO_DELAYED_TASKS</a>);</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    }</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="comment">// using a dictionary for a fast access of message queues</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    status = <a class="code hl_function" href="dictionary_8c.html#a004a569e92c8b61b43e2c1aeb9635c10">dictionary_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, <a class="code hl_define" href="kernel_8h.html#a566abc9d376487a5cfdbc47862f10e0d">KERNEL_MAX_MESSAGE_QUEUE</a>);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    }</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="comment">// using a dictionary for a fast access of semaphores</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    status = <a class="code hl_function" href="dictionary_8c.html#a004a569e92c8b61b43e2c1aeb9635c10">dictionary_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a7e606e2b231f26b0df595b49c90017e9">KERNEL_NO_SEMAPHORES</a>);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    }</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    status = <a class="code hl_function" href="dictionary_8c.html#a004a569e92c8b61b43e2c1aeb9635c10">dictionary_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, <a class="code hl_define" href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a>);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad275af0477e10f1a9e2778e2a49061a4">KERNEL_NO_MUTEXES</a>);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    }</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    status = <a class="code hl_function" href="linked__list_8c.html#ab84dc67b6f40f1f88c3b516453c0115e">linked_list_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a3c25e698284734efaa98b3266d27c108">KERNEL_NO_BLOCKED_TASKS</a>);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    status = <a class="code hl_function" href="linked__list_8c.html#ab84dc67b6f40f1f88c3b516453c0115e">linked_list_create</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7dc0730fdfa63247d899c6dae2681da0">g_terminated_tasks_list</a>);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a1db81878d09c9e8ce28b945aa52e0a80">KERNEL_NO_TERMINATED_TASKS_LIST</a>);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>}</div>
</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="foldopen" id="foldopen00203" data-start="{" data-end="}">
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a6b3e7eb90f3effc2d59aedaff123dff5">  203</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a6b3e7eb90f3effc2d59aedaff123dff5">kernel_deinit</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <a class="code hl_function" href="stm_2kernel_2kernel_8c.html#ad0710a90c578c112db22235646936a20">kernel_disable_interrupts</a>();</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="comment">// delete priority groups</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> *priority_group = NULL;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> priority = 0; priority&lt;<a class="code hl_define" href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a>; priority++) {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, priority, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            <a class="code hl_function" href="linked__list_8c.html#a157221397716f9d0d15a22242168d6d5">linked_list_delete</a>(&amp;priority_group);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>        }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    status = <a class="code hl_function" href="dictionary_8c.html#ae6bc6def8de33ff78ef6ed35754cde34">dictionary_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a54a024dfd1a2ec03d045e57d8d641e3f">KERNEL_UNABLE_TO_DELETE_PRIORITIZED_TASKS</a>);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    }</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    <span class="comment">// delete delayed task linked list</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    status = <a class="code hl_function" href="linked__list_8c.html#a157221397716f9d0d15a22242168d6d5">linked_list_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span> </div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="comment">// delete message queues</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <a class="code hl_struct" href="structmessage__queue__t.html">message_queue_t</a> *message_queue = NULL;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> message_queue_id = 0; message_queue_id &lt; <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a>; message_queue_id++) {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, message_queue_id, (<span class="keywordtype">void</span> **) &amp;message_queue);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <a class="code hl_function" href="message__queue_8c.html#a051e749f70d8ab8b4a8ed34fdb6b44d3">message_queue_delete</a>(&amp;message_queue);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        }</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="comment">// reset message queue ids</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a> = 0;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="comment">// delete list of message queue</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    status = <a class="code hl_function" href="dictionary_8c.html#ae6bc6def8de33ff78ef6ed35754cde34">dictionary_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ac19215df2c8d1edc8313813348cd8ead">KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE_LIST</a>);</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    }</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <span class="comment">// delete semaphores</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a> *semaphore = NULL;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> semaphore_id = 0; semaphore_id &lt; <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a>; semaphore_id++) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, semaphore_id, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            <a class="code hl_function" href="semaphore_8c.html#aa7f90041bb84a47eea9c15fd496d72a5">semaphore_delete</a>(&amp;semaphore);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="comment">// delete list of semaphores</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    status = <a class="code hl_function" href="dictionary_8c.html#ae6bc6def8de33ff78ef6ed35754cde34">dictionary_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>);</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a4db0a2552dfbcdc53937ddf1a70959a3">KERNEL_UNABLE_TO_DELETE_SEMAPHORE_LIST</a>);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    }</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="comment">// delete mutexes</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a> *mutex = NULL;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> mutex_id = 0; mutex_id &lt; <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a>; mutex_id++) {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, mutex_id, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <a class="code hl_function" href="mutex_8c.html#ad2cceaf0d82159fb4994b157bbe0ba42">mutex_delete</a>(&amp;mutex);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="comment">// reset mutex ids</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a> = 0;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="comment">// delete list of semaphores</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    status = <a class="code hl_function" href="dictionary_8c.html#ae6bc6def8de33ff78ef6ed35754cde34">dictionary_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a2380b988e8a35552fe5f297d791fcb1d">KERNEL_UNABLE_TO_DELETE_MUTEX_LIST</a>);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    status = <a class="code hl_function" href="linked__list_8c.html#a157221397716f9d0d15a22242168d6d5">linked_list_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ab5c2dda7bb916476bce65178668bb29d">KERNEL_UNABLE_TO_DELETE_BLOCKED_LIST</a>);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    status = <a class="code hl_function" href="linked__list_8c.html#a157221397716f9d0d15a22242168d6d5">linked_list_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7dc0730fdfa63247d899c6dae2681da0">g_terminated_tasks_list</a>);</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ae4f356e6ba832f5e410ad230f8608034">KERNEL_UNABLE_TO_DELETE_TERMINATED_LIST</a>);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    }</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    <span class="comment">// delete all tasks</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = NULL;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> tadk_id = 0; tadk_id&lt;<a class="code hl_define" href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a>; tadk_id++) {</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>, tadk_id, (<span class="keywordtype">void</span> **) &amp;task);</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>            <a class="code hl_function" href="task_8c.html#aba2c0017fce23775355c8c24f4c1bf96">task_delete</a>(&amp;task);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        }</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    }</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="comment">// create dictionary which lists all tasks by there linked list element</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    status = <a class="code hl_function" href="dictionary_8c.html#ae6bc6def8de33ff78ef6ed35754cde34">dictionary_delete</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#abd562ec85481a947c197003c0b5499f7">KERNEL_UNABLE_TO_DELETE_LIST_OF_TASKS</a>);</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    }</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>}</div>
</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="foldopen" id="foldopen00322" data-start="{" data-end="}">
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ae95babde8b304cecd735495103f57d0b">  322</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ae95babde8b304cecd735495103f57d0b">kernel_add_task</a>(<span class="keywordtype">size_t</span> (*task_main)(<span class="keywordtype">void</span>), uint8_t u8_task_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *task_name, uint8_t u8_task_priority, <span class="keywordtype">size_t</span> time_quantum, <span class="keywordtype">size_t</span> wanted_events, <span class="keywordtype">void</span> (*notification_conditions)(<span class="keywordtype">size_t</span> *, <span class="keywordtype">size_t</span>), <span class="keywordtype">size_t</span> timeout) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="comment">// create a mandatory task structure as base for the tcb and relevant kernel attributes</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = NULL;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="task_8c.html#a4b17855147c0cc7a3676e398b711bf09">task_create</a>(&amp;task, task_main, <a class="code hl_function" href="src_2kernel_2kernel_8c.html#af0b12129cd39d874bfebcc424b723b5d">kernel_task_terminate</a>, u8_task_id, task_name, u8_task_priority, time_quantum, wanted_events, notification_conditions, timeout);</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a>);</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    }</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *already_inserted_task = NULL;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>, u8_task_id, (<span class="keywordtype">void</span> **) &amp;already_inserted_task);</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordflow">if</span> (status == <a class="code hl_define" href="dictionary_8h.html#a45d937bcd1f52e7b2107dfa7a8d703c7">DICTIONARY_VALUE_IS_NULL</a>) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        status = <a class="code hl_function" href="dictionary_8c.html#aa2e04eccac802b9fc8101d518979b733">dictionary_add</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>, u8_task_id, (<span class="keywordtype">void</span> **) &amp;task);</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a>);</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        }</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a>);</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="comment">// insert the task in the corresponding priority group</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> *priority_group = NULL;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, u8_task_priority, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a>);</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="comment">// always push a task at the linked list head, because the kernel uses the tail by default as first</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    status = <a class="code hl_function" href="linked__list_8c.html#a33ada9c56ab9e6913088e439cc7cc5bb">linked_list_push_front</a>(&amp;priority_group, (<span class="keywordtype">void</span> **) &amp;task);</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a>);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="comment">// preset for priority inheritance</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="keywordflow">if</span> (u8_task_priority &gt; <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">g_task_lowest_priority</a>) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af2a34ea23217c5e3ac0f09b2fe9802cd">g_task_lower_priority</a> = u8_task_priority;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">g_task_lowest_priority</a> = u8_task_priority;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    }</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a303f92a941c5493399c334cdb3ee468d">g_available_tasks</a>++;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>}</div>
</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="foldopen" id="foldopen00377" data-start="{" data-end="}">
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a162d941d58f7afe1f3202d798d6fdbac">  377</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a162d941d58f7afe1f3202d798d6fdbac">kernel_start</a>(<span class="keywordtype">void</span>){</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac27d4440da0880ea8d551dbf82a88a58">kernel_set_status</a>(<a class="code hl_enumvalue" href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2a2185a5e4d0913f3dcf9ebc3f1c6a7bf3">EN_KERNEL_STARTING</a>);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = NULL;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> *priority_group = NULL;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *task_iterator = NULL;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="keywordtype">size_t</span> status = 0;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="comment">// reallocate tasks by compacting</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> task_priority = 0; task_priority &lt; <a class="code hl_define" href="task_8h.html#a3fe16c8f3d0c2cf422fa1097ad76accb">TASK_MAX_PRIORITY</a>; task_priority++) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, task_priority, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a684cf5b9cdd027f8e4b246347b8d3cfd">KERNEL_UNABLE_TO_CHANGE_TASK_PRIORITY</a>);</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <span class="keywordflow">if</span> (priority_group-&gt;size &gt; 0) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span> </div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="comment">// empty priority list discovered</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> *lower_priority_group = NULL;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> lower_task_priority = task_priority; lower_task_priority &lt;= <a class="code hl_define" href="task_8h.html#a3fe16c8f3d0c2cf422fa1097ad76accb">TASK_MAX_PRIORITY</a>; lower_task_priority++) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, lower_task_priority, (<span class="keywordtype">void</span> **) &amp;lower_priority_group);</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#a45d937bcd1f52e7b2107dfa7a8d703c7">DICTIONARY_VALUE_IS_NULL</a>) {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>                <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a684cf5b9cdd027f8e4b246347b8d3cfd">KERNEL_UNABLE_TO_CHANGE_TASK_PRIORITY</a>);</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>            }</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            <span class="keywordflow">if</span> (lower_priority_group-&gt;size == 0) {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>            }</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            <span class="comment">// update priority according to the priority group, where the tasks are being reinserted</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *update_task_priority_iterator = lower_priority_group-&gt;tail;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            <span class="keywordflow">while</span> (update_task_priority_iterator != NULL) {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>                <a class="code hl_struct" href="structtask__t.html">task_t</a> *update_task_priority = (<a class="code hl_struct" href="structtask__t.html">task_t</a> *) update_task_priority_iterator-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>                status = <a class="code hl_function" href="task_8c.html#a86c610c32b85a985b4e626192a4ad6dc">task_set_priority</a>(&amp;update_task_priority, task_priority);</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>                <span class="keywordflow">if</span> (status != <a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>                    <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a684cf5b9cdd027f8e4b246347b8d3cfd">KERNEL_UNABLE_TO_CHANGE_TASK_PRIORITY</a>);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>                }</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>                update_task_priority_iterator = update_task_priority_iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af2a34ea23217c5e3ac0f09b2fe9802cd">g_task_lower_priority</a> = task_priority;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">g_task_lowest_priority</a> = task_priority;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>            <a class="code hl_function" href="linked__list_8c.html#a00841e8f45c8c8ae67d894e1a90d3dcb">linked_list_move_linked_list_after</a>(&amp;priority_group, &amp;lower_priority_group);</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        }</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    }</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> priority = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">g_task_lowest_priority</a> + 1; priority &lt; <a class="code hl_define" href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a>; priority++) {</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        <span class="comment">// iterate over potentially empty priority groups and delete the lists to save memory</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> *priority_group = NULL;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, priority, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a684cf5b9cdd027f8e4b246347b8d3cfd">KERNEL_UNABLE_TO_CHANGE_TASK_PRIORITY</a>);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        }</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span> </div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        status = <a class="code hl_function" href="linked__list_8c.html#a157221397716f9d0d15a22242168d6d5">linked_list_delete</a>(&amp;priority_group);</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a55c7b88956349dcba6b680d59ab2a2d4">KERNEL_UNABLE_TO_DELETE_PRIORITY_LIST</a>);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    }</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span> </div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <span class="comment">// set the alternative stack pointer to a default position</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2e52dedad3cf7d714060e64727c82aa6">kernel_set_stack_pointer</a>();</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <span class="comment">// iterate over all priority lists and start all containing tasks</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> task_priority=0; task_priority &lt; <a class="code hl_define" href="task_8h.html#a3fe16c8f3d0c2cf422fa1097ad76accb">TASK_MAX_PRIORITY</a>; task_priority++) {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="comment">// check, if the priority group was actually set or abort on any other error</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, task_priority, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="dictionary_8h.html#a45d937bcd1f52e7b2107dfa7a8d703c7">DICTIONARY_VALUE_IS_NULL</a>) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a>);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        }</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        <span class="comment">// iterate over the priority group from the prioritized task list and start the task</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        task_iterator = priority_group-&gt;tail;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        <span class="keywordflow">while</span> (task_iterator!=NULL) {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            task = (<a class="code hl_struct" href="structtask__t.html">task_t</a> *) task_iterator-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>            <span class="comment">// check task before any use</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            status = <a class="code hl_function" href="task_8c.html#a01484528b00ba93895b706ea4a029302">task_checking</a>(&amp;task);</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            <span class="keywordflow">if</span> (status==<a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac27d4440da0880ea8d551dbf82a88a58">kernel_set_status</a>(<a class="code hl_enumvalue" href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2a92425f6b2d60450b04c70acddc6b9a59">EN_KERNEL_RUNNING</a>);</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                status = <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a82d3d38923c236ae08d1e1171ef761db">kernel_start_task</a>(&amp;priority_group, &amp;task_iterator, &amp;task);</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                    <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>            }</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>            task_iterator = task_iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        }</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    }</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="comment">// it will return if the system is capable of running tasks in parallel</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>}</div>
</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="foldopen" id="foldopen00496" data-start="{" data-end="}">
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#aae2d2023cb28a5659d68f4d4e5e0d41a">  496</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#aae2d2023cb28a5659d68f4d4e5e0d41a">kernel_message_queue_create</a>(<a class="code hl_struct" href="structmessage__queue__identifier__t.html">message_queue_identifier_t</a> **message_queue_identifier, <span class="keywordtype">char</span> *name, <span class="keywordtype">size_t</span> queue_size, <span class="keywordtype">size_t</span> element_size) {</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="comment">// return immediately if the amount of message queue exceeded</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a>&gt;=<a class="code hl_define" href="kernel_8h.html#a566abc9d376487a5cfdbc47862f10e0d">KERNEL_MAX_MESSAGE_QUEUE</a>) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a558709e5078f9f4d278d02b100ffb25e">KERNEL_UNABLE_TO_ADD_MESSAGE_QUEUE</a>;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    }</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <span class="comment">// create a new message on the provided parameters</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    <a class="code hl_struct" href="structmessage__queue__t.html">message_queue_t</a> *message_queue = NULL;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="message__queue_8c.html#a2308f343d4d76ed9932c92224e2e10c5">message_queue_create</a>(&amp;message_queue, queue_size, element_size, <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a>, name);</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a558709e5078f9f4d278d02b100ffb25e">KERNEL_UNABLE_TO_ADD_MESSAGE_QUEUE</a>);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <span class="comment">// add created message queue in a dictionary for fast access</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    status = <a class="code hl_function" href="dictionary_8c.html#aa2e04eccac802b9fc8101d518979b733">dictionary_add</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a>, (<span class="keywordtype">void</span> **) &amp;message_queue);</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a558709e5078f9f4d278d02b100ffb25e">KERNEL_UNABLE_TO_ADD_MESSAGE_QUEUE</a>);</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    }</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span> </div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <span class="comment">// increment the amount of message queue to limit the amount</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a>++;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span> </div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    <span class="comment">// set the key to the message queue</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    (*message_queue_identifier) = message_queue-&gt;<a class="code hl_variable" href="structmessage__queue__t.html#a4baa9892cf26b8f8e7f8b543d5884656">message_queue_identifier</a>;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>}</div>
</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="foldopen" id="foldopen00531" data-start="{" data-end="}">
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a15059a2c1786224f9d8b8f357af1d131">  531</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a15059a2c1786224f9d8b8f357af1d131">kernel_message_queue_delete</a>(<a class="code hl_struct" href="structmessage__queue__identifier__t.html">message_queue_identifier_t</a> **message_queue_identifier) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="comment">// check for valid key</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="message__queue_8c.html#ae66a349dddbf73ee44edf7a25fee1682">message_queue_identifier_checking</a>(message_queue_identifier);</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ac7bac8978e66081ed7fec5769206dac5">KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE</a>);</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    }</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="comment">// get the corresponding message queue</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <a class="code hl_struct" href="structmessage__queue__t.html">message_queue_t</a> *message_queue = NULL;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, (*message_queue_identifier)-&gt;id, (<span class="keywordtype">void</span> **) &amp;message_queue);</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ac7bac8978e66081ed7fec5769206dac5">KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE</a>);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    }</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="comment">// delete the message queue and the key and the message shall become null</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    status = <a class="code hl_function" href="message__queue_8c.html#a051e749f70d8ab8b4a8ed34fdb6b44d3">message_queue_delete</a>(&amp;message_queue);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ac7bac8978e66081ed7fec5769206dac5">KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE</a>);</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>}</div>
</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span> </div>
<div class="foldopen" id="foldopen00564" data-start="{" data-end="}">
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a315ae0051d7a92cfb9ca73cce439df9c">  564</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a315ae0051d7a92cfb9ca73cce439df9c">kernel_message_queue_send</a>(<a class="code hl_struct" href="structmessage__queue__identifier__t.html">message_queue_identifier_t</a> **message_queue_identifier, <span class="keywordtype">void</span> *message, <span class="keywordtype">size_t</span> element_size, <span class="keywordtype">bool</span> urgent) {</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span> </div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="comment">// check message queue identifier for irregular structure</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="message__queue_8c.html#ae66a349dddbf73ee44edf7a25fee1682">message_queue_identifier_checking</a>(message_queue_identifier);</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a1734a13d5bfd51afa67eaa70b55a1cbe">MESSAGE_QUEUE_IDENTIFIER_SUCCESS</a>) {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a>);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    }</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span> </div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <span class="comment">// obtain message queue</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <a class="code hl_struct" href="structmessage__queue__t.html">message_queue_t</a> *message_queue = NULL;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, (*message_queue_identifier)-&gt;id, (<span class="keywordtype">void</span> **)&amp;message_queue);</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="keywordflow">if</span> (status) {</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a>);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    <span class="comment">// prevent other tasks of manipulating the message queue by blocking the context switch</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span> </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="comment">// send message and be ready for reinserting a task</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *<a class="code hl_struct" href="structelement.html">element</a> = NULL;</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = NULL;</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    status = <a class="code hl_function" href="message__queue_8c.html#adad5b1beada3120a6e8639f95979b38d">message_queue_send</a>(&amp;message_queue, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task, message, element_size, urgent);</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a>);</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="keywordflow">if</span> (task != NULL) {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        <span class="comment">// task was returned</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;message_queue-&gt;<a class="code hl_variable" href="structmessage__queue__t.html#a32adb002bd2939d1ad38bb4385d5acb7">receiving_task_list</a>, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task);</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span> </div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>}</div>
</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span> </div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span> </div>
<div class="foldopen" id="foldopen00614" data-start="{" data-end="}">
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#aa1371c130a205b07458651290a56bdd0">  614</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#aa1371c130a205b07458651290a56bdd0">kernel_message_queue_send_blocking</a>(<a class="code hl_struct" href="structmessage__queue__identifier__t.html">message_queue_identifier_t</a> **message_queue_identifier, <span class="keywordtype">void</span> *message, <span class="keywordtype">size_t</span> element_size, <span class="keywordtype">bool</span> urgent) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span> </div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="comment">// check message queue identifier for irregular structure</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="message__queue_8c.html#ae66a349dddbf73ee44edf7a25fee1682">message_queue_identifier_checking</a>(message_queue_identifier);</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a1734a13d5bfd51afa67eaa70b55a1cbe">MESSAGE_QUEUE_IDENTIFIER_SUCCESS</a>) {</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a>);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="comment">// obtain message queue</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <a class="code hl_struct" href="structmessage__queue__t.html">message_queue_t</a> *message_queue = NULL;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, (*message_queue_identifier)-&gt;id, (<span class="keywordtype">void</span> **)&amp;message_queue);</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">if</span> (status) {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a>);</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    }</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="comment">// try to send a message and be ready for reinserting a task</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *<a class="code hl_struct" href="structelement.html">element</a> = NULL;</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = NULL;</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <span class="comment">// prevent other tasks of manipulating the message queue by blocking the context switch</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        status = <a class="code hl_function" href="message__queue_8c.html#a24a7ea0a1b2abb026b78348df2fcb2bb">message_queue_send_blocking</a>(&amp;message_queue, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task, message, element_size, urgent);</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>            <span class="comment">// task succesfully received a message</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>            <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        }</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status==<a class="code hl_define" href="message__queue_8h.html#a3e0013a7a2444bae6a19fde4ad9d0298">MESSAGE_QUEUE_UNABLE_TO_SEND</a>) {</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            <span class="comment">// task was inserted in the message queue waiting list</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        }</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a>);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>        }</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    } <span class="keywordflow">while</span>(status == <a class="code hl_define" href="message__queue_8h.html#a3e0013a7a2444bae6a19fde4ad9d0298">MESSAGE_QUEUE_UNABLE_TO_SEND</a>);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span> </div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <span class="keywordflow">if</span> (task != NULL) {</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <span class="comment">// task was returned</span></div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;message_queue-&gt;<a class="code hl_variable" href="structmessage__queue__t.html#a32adb002bd2939d1ad38bb4385d5acb7">receiving_task_list</a>, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task);</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    }</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span> </div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>}</div>
</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="foldopen" id="foldopen00668" data-start="{" data-end="}">
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a02020ffe19a15a0e6a9434c637d8a1ca">  668</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a02020ffe19a15a0e6a9434c637d8a1ca">kernel_message_queue_receive</a>(<a class="code hl_struct" href="structmessage__queue__identifier__t.html">message_queue_identifier_t</a> **message_queue_identifier, <span class="keywordtype">void</span> **message) {</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span> </div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <span class="comment">// check message queue identifier for irregular structure</span></div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="message__queue_8c.html#ae66a349dddbf73ee44edf7a25fee1682">message_queue_identifier_checking</a>(message_queue_identifier);</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="message__queue_8h.html#a1734a13d5bfd51afa67eaa70b55a1cbe">MESSAGE_QUEUE_IDENTIFIER_SUCCESS</a>) {</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a298af722690911e21663f7852ddba29f">KERNEL_UNABLE_TO_RECEIVE_MESSAGE</a>);</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    }</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span> </div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <span class="comment">// obtain message queue</span></div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <a class="code hl_struct" href="structmessage__queue__t.html">message_queue_t</a> *message_queue = NULL;</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a>, (*message_queue_identifier)-&gt;id, (<span class="keywordtype">void</span> **) &amp;message_queue);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a298af722690911e21663f7852ddba29f">KERNEL_UNABLE_TO_RECEIVE_MESSAGE</a>);</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    }</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span> </div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="comment">// try to receive a message and be ready for reinserting a task</span></div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *sender_element = NULL;</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *sender_task = NULL;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="comment">// prevent other tasks of manipulating the message queue by blocking the context switch</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>        status = <a class="code hl_function" href="message__queue_8c.html#aaede9925afd52fbc4445d73517ddf2b5">message_queue_receive</a>(&amp;message_queue, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>, &amp;sender_element, &amp;sender_task, message);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        <span class="keywordflow">if</span> (status==<a class="code hl_define" href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a>) {</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            <span class="comment">// task succesfully received a message</span></div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        }</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status==<a class="code hl_define" href="message__queue_8h.html#accf774052a382c5192305ad60ae90f32">MESSAGE_QUEUE_UNABLE_TO_RECEIVE</a>) {</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>            <span class="comment">// task was inserted in the message queue waiting list</span></div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        }</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a298af722690911e21663f7852ddba29f">KERNEL_UNABLE_TO_RECEIVE_MESSAGE</a>);</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        }</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span> </div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    } <span class="keywordflow">while</span> (status == <a class="code hl_define" href="message__queue_8h.html#accf774052a382c5192305ad60ae90f32">MESSAGE_QUEUE_UNABLE_TO_RECEIVE</a>);</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span> </div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <span class="keywordflow">if</span> (sender_task!=NULL) {</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        <span class="comment">// task was returned</span></div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;message_queue-&gt;<a class="code hl_variable" href="structmessage__queue__t.html#a6005a7d3f1fa1707920743fa2efe0869">sending_task_list</a>, &amp;sender_element, &amp;sender_task);</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span> </div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>}</div>
</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="foldopen" id="foldopen00723" data-start="{" data-end="}">
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a8d36513dfa683ef9c3746f27d4aac0e4">  723</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a8d36513dfa683ef9c3746f27d4aac0e4">kernel_semaphore_create</a>(<span class="keywordtype">size_t</span> *<span class="keywordtype">id</span>, <span class="keywordtype">size_t</span> tokens) {</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="comment">// return immediately if the amount of semaphores exceeded</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a> &gt;= <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>) {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#abbb97ba6bcaee252c0f28e39dcc8774b">KERNEL_UNABLE_TO_ADD_SEMAPHORE</a>;</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    }</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="comment">// create semaphore and check for errors</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a> *semaphore = NULL;</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="semaphore_8c.html#a946c03546b3b583d68e3886f3f1773df">semaphore_create</a>(&amp;semaphore, <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a>, tokens);</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a>) {</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#abbb97ba6bcaee252c0f28e39dcc8774b">KERNEL_UNABLE_TO_ADD_SEMAPHORE</a>);</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    }</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span> </div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    <span class="comment">// insert semaphore in a dictionary for fast access</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    status = <a class="code hl_function" href="dictionary_8c.html#aa2e04eccac802b9fc8101d518979b733">dictionary_add</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#abbb97ba6bcaee252c0f28e39dcc8774b">KERNEL_UNABLE_TO_ADD_SEMAPHORE</a>);</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    }</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span> </div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <span class="comment">// assign key to the semaphore</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    *<span class="keywordtype">id</span> = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="comment">// increment amount the amount of semaphores to limit the amount</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a>++;</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>}</div>
</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span> </div>
<div class="foldopen" id="foldopen00757" data-start="{" data-end="}">
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#aec518d3192ce8c25705b52ffd17b7de8">  757</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#aec518d3192ce8c25705b52ffd17b7de8">kernel_semaphore_delete</a>(<span class="keywordtype">size_t</span> *<span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a> *semaphore = NULL;</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, *<span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aec0d7fd297264581da7a435d542b8c94">KERNEL_UNABLE_TO_DELETE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>    }</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span> </div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <span class="keywordflow">while</span> (semaphore-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a854352f53b148adc24983a58a1866d66">size</a> &gt; 0) {</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>        status = <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;semaphore-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>, &amp;semaphore-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>, (<a class="code hl_struct" href="structtask__t.html">task_t</a> **) &amp;semaphore-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>) {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>            <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>        }</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span> </div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    status = <a class="code hl_function" href="semaphore_8c.html#aa7f90041bb84a47eea9c15fd496d72a5">semaphore_delete</a>(&amp;semaphore);</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a>) {</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aec0d7fd297264581da7a435d542b8c94">KERNEL_UNABLE_TO_DELETE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    }</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    *<span class="keywordtype">id</span> = 0;</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>}</div>
</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="foldopen" id="foldopen00789" data-start="{" data-end="}">
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ab44318353dff0f640cad55def566826d">  789</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ab44318353dff0f640cad55def566826d">kernel_semaphore_acquire</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>) {</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a>;</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    }</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    <span class="comment">// get the requested semaphore by the id from the semaphore dictionary</span></div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a>* semaphore = NULL;</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    }</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span> </div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <span class="comment">// try to obtain a token from the semaphore</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        <span class="comment">// prevent other tasks of manipulating the semaphore by blocking the context switch</span></div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="keywordflow">while</span> (!<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a>);</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span> </div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        status = <a class="code hl_function" href="semaphore_8c.html#ae192b4355be68c3e15a5063225ce018b">semaphore_acquire</a>(&amp;semaphore, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span> </div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <span class="keywordflow">if</span> (status == <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a>) {</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>            <span class="comment">// acquired semaphore and semaphore will not be modified</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>            <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        }</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code hl_define" href="semaphore_8h.html#a4f55194fa0cf1c54967f7ac6cfb87468">SEMAPHORE_NO_TOKENS</a>) {</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>            <span class="comment">// task was inserted in the semaphore waiting list</span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        }</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>            <span class="comment">// error happened with the semaphore</span></div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>        }</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    } <span class="keywordflow">while</span> (status == <a class="code hl_define" href="semaphore_8h.html#a4f55194fa0cf1c54967f7ac6cfb87468">SEMAPHORE_NO_TOKENS</a>);</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span> </div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>}</div>
</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span> </div>
<div class="foldopen" id="foldopen00839" data-start="{" data-end="}">
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a6bef4ee0a9574d077bf42797c46ed4ce">  839</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a6bef4ee0a9574d077bf42797c46ed4ce">kernel_semaphore_release</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>) {</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a>;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    }</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    <span class="comment">// prevent other tasks of manipulating the semaphore by blocking the context switch</span></div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <span class="comment">// get the requested semaphore by the id from the semaphore dictionary</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a>* semaphore = NULL;</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>){</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    }</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span> </div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="comment">// release the semaphore and check, if a task can be moved from the waiting list to the corresponding priority group</span></div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a>* task = NULL;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a>* <a class="code hl_struct" href="structelement.html">element</a> = NULL;</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    status = <a class="code hl_function" href="semaphore_8c.html#aa571a1fad2e37f0b14b99260cd63f2c8">semaphore_release</a>(&amp;semaphore, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task);</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span> </div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="keywordflow">if</span> (task!=NULL) {</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        status = <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;semaphore-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task);</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>            <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a>) {</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    }</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span> </div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span> </div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span> </div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span> </div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>}</div>
</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="foldopen" id="foldopen00886" data-start="{" data-end="}">
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a674a82b03f5c545da5ece7cb351e225c">  886</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a674a82b03f5c545da5ece7cb351e225c">kernel_semaphore_acquire_non_blocking</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span> </div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>) {</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a>;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    }</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span> </div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    <span class="comment">// prevent other tasks of manipulating the semaphore by blocking the context switch</span></div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span> </div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    <span class="comment">// get the requested semaphore by the id from the semaphore dictionary</span></div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a>* semaphore = NULL;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    }</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="comment">// try to obtain a token from the semaphore</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    status = <a class="code hl_function" href="semaphore_8c.html#a04e62eb1d82d269d299397ca7ef9c979">semaphore_acquire_non_blocking</a>(&amp;semaphore);</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span> </div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    <span class="comment">// acquired semaphore and semaphore will not be modified</span></div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span> </div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a>) {</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        <span class="comment">// can be error or failed to acquire (SEMAPHORE_NO_TOKENS), handling required by caller</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>    }</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span> </div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>}</div>
</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span> </div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span> </div>
<div class="foldopen" id="foldopen00927" data-start="{" data-end="}">
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a8c11a56a5de987e7e13ad84524a0c975">  927</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a8c11a56a5de987e7e13ad84524a0c975">kernel_semaphore_release_non_blocking</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>) {</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a>;</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>    }</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span> </div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>    <span class="comment">// prevent other tasks of manipulating the semaphore by blocking the context switch</span></div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span> </div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    <span class="comment">// get the requested semaphore by the id from the semaphore dictionary</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a>* semaphore = NULL;</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>){</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    }</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    <span class="comment">// release the semaphore</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    status = <a class="code hl_function" href="semaphore_8c.html#a8d50f46b59e703b91b4651f901fc0ac0">semaphore_release_non_blocking</a>(&amp;semaphore);</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span> </div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a>) {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        <span class="comment">// can be error or failed to release (SEMAPHORE_REACHED_MAX_TOKENS), handling required by caller</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a>);</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    }</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span> </div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>}</div>
</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span> </div>
<div class="foldopen" id="foldopen00965" data-start="{" data-end="}">
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ae92a818de2bb3a511f7add951f4c053a">  965</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ae92a818de2bb3a511f7add951f4c053a">kernel_semaphore_is_available</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a>)</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a23bfbf40fe27cfcb01cfb777aedb8035">KERNEL_UNEXPECTED_SEMAPHORE_AVAILABILTY</a>;</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span> </div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    <a class="code hl_struct" href="structsemaphore__t.html">semaphore_t</a>* semaphore = NULL;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;semaphore);</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>)</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a23bfbf40fe27cfcb01cfb777aedb8035">KERNEL_UNEXPECTED_SEMAPHORE_AVAILABILTY</a>);</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span> </div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    status = <a class="code hl_function" href="semaphore_8c.html#a0ac7e334a27eb11a5705859c03cffe85">semaphore_is_available</a>(&amp;semaphore);</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <span class="keywordflow">if</span> (status == <a class="code hl_define" href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a> || status == <a class="code hl_define" href="semaphore_8h.html#a4f55194fa0cf1c54967f7ac6cfb87468">SEMAPHORE_NO_TOKENS</a>) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    }</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span> </div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a23bfbf40fe27cfcb01cfb777aedb8035">KERNEL_UNEXPECTED_SEMAPHORE_AVAILABILTY</a>);</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>}</div>
</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span><span class="comment">// MUTEX</span></div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span> </div>
<div class="foldopen" id="foldopen00993" data-start="{" data-end="}">
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a67ba865ed8e4f4f8b172f03bc702ce02">  993</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a67ba865ed8e4f4f8b172f03bc702ce02">kernel_mutex_create</a>(<span class="keywordtype">size_t</span> *<span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    <span class="comment">// return immediately if the amount of mutexes exceeded</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a> &gt;= <a class="code hl_define" href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a>) {</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a3935f6352152e611973a1211d1334ee8">KERNEL_UNABLE_TO_CREATE_MUTEX</a>;</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>    }</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span> </div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    <span class="comment">// create mutex and check for errors</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a> *mutex = NULL;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="mutex_8c.html#a9c2d6b9468d5acde3766668563fba4a4">mutex_create</a>(&amp;mutex, <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a>);</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a>) {</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a3935f6352152e611973a1211d1334ee8">KERNEL_UNABLE_TO_CREATE_MUTEX</a>);</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    }</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span> </div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    <span class="comment">// insert mutex in a dictionary for fast access</span></div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    status = <a class="code hl_function" href="dictionary_8c.html#aa2e04eccac802b9fc8101d518979b733">dictionary_add</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a>, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a3935f6352152e611973a1211d1334ee8">KERNEL_UNABLE_TO_CREATE_MUTEX</a>);</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    }</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span> </div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>    <span class="comment">// assign key to the mutex</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>    *<span class="keywordtype">id</span> = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a>;</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span> </div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <span class="comment">// increment amount the amount of mutexes to limit the amount</span></div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a>++;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>}</div>
</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span> </div>
<div class="foldopen" id="foldopen01028" data-start="{" data-end="}">
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ab88bff7bcf44ed09a75fc5a42d14ef30"> 1028</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ab88bff7bcf44ed09a75fc5a42d14ef30">kernel_mutex_delete</a>(<span class="keywordtype">size_t</span> *<span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a> *mutex = NULL;</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, *<span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a325d67406d4c640587941d922e8b5cd1">KERNEL_UNABLE_TO_DELETE_MUTEX</a>);</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    }</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span> </div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    <span class="keywordflow">while</span> (mutex-&gt;<a class="code hl_variable" href="structmutex__t.html#a1f98447d6499761302bced3bffa03c12">binary_semaphore</a>-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a854352f53b148adc24983a58a1866d66">size</a> &gt; 0) {</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>        status = <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;mutex-&gt;<a class="code hl_variable" href="structmutex__t.html#a1f98447d6499761302bced3bffa03c12">binary_semaphore</a>-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>, &amp;mutex-&gt;<a class="code hl_variable" href="structmutex__t.html#a1f98447d6499761302bced3bffa03c12">binary_semaphore</a>-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>, (<a class="code hl_struct" href="structtask__t.html">task_t</a> **) &amp;mutex-&gt;<a class="code hl_variable" href="structmutex__t.html#a1f98447d6499761302bced3bffa03c12">binary_semaphore</a>-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>) {</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>        }</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    }</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span> </div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    status = <a class="code hl_function" href="mutex_8c.html#ad2cceaf0d82159fb4994b157bbe0ba42">mutex_delete</a>(&amp;mutex);</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a>) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a325d67406d4c640587941d922e8b5cd1">KERNEL_UNABLE_TO_DELETE_MUTEX</a>);</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    }</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    *<span class="keywordtype">id</span> = 0;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span> </div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>}</div>
</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span> </div>
<div class="foldopen" id="foldopen01060" data-start="{" data-end="}">
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a4bd2210dccfc7c855768a0a9260392a4"> 1060</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a4bd2210dccfc7c855768a0a9260392a4">kernel_mutex_acquire</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span> </div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a>) {</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    }</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span> </div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>    <span class="comment">// get the requested mutex by the id from the mutex dictionary</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a>* mutex = NULL;</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    }</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span> </div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    <span class="comment">// try to obtain a token from the mutex</span></div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        <span class="comment">// prevent other tasks of manipulating the mutex by blocking the context switch</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>        <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>        <span class="keywordflow">while</span> (!<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a>);</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span> </div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        status = <a class="code hl_function" href="mutex_8c.html#afc9945ec990447198a76c8507eec17c3">mutex_acquire</a>(&amp;mutex, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span> </div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>        <span class="keywordflow">if</span> (status == <a class="code hl_define" href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a>) {</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            <span class="comment">// acquired semaphore and semaphore will not be modified</span></div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>            <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        }</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == <a class="code hl_define" href="mutex_8h.html#a315158a164b52a187fff01a5942bb68b">MUTEX_OWNED_BY_OTHER_TASK</a>) {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>            <span class="comment">// task was inserted in the mutexes binary semaphore waiting list</span></div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        }</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>            <span class="comment">// error happened with the mutex</span></div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>);</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        }</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    } <span class="keywordflow">while</span> (status == <a class="code hl_define" href="mutex_8h.html#a315158a164b52a187fff01a5942bb68b">MUTEX_OWNED_BY_OTHER_TASK</a>);</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span> </div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>}</div>
</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span> </div>
<div class="foldopen" id="foldopen01110" data-start="{" data-end="}">
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a729cb0cadb1d43c7f3e7d3159822cca8"> 1110</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a729cb0cadb1d43c7f3e7d3159822cca8">kernel_mutex_release</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a>) {</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a8b45a206ff9b1c7bb7a145ee1b51ac89">KERNEL_UNABLE_TO_RELEASE_MUTEX</a>;</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>    }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span> </div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="comment">// prevent other tasks of manipulating the mutex by blocking the context switch</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span> </div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    <span class="comment">// get the requested mutex by the id from the mutex dictionary</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a>* mutex = NULL;</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>){</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a8b45a206ff9b1c7bb7a145ee1b51ac89">KERNEL_UNABLE_TO_RELEASE_MUTEX</a>);</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>    }</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span> </div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    <span class="comment">// release the mutex and check, if a task can be moved from the waiting list to the corresponding priority group</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a>* task = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>;</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a>* <a class="code hl_struct" href="structelement.html">element</a> = NULL;</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    status = <a class="code hl_function" href="mutex_8c.html#a0ff8eddf876f3efbd8f5ccce5a81f5ea">mutex_release</a>(&amp;mutex, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task);</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span> </div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>    <span class="keywordflow">if</span> (task!=NULL) {</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>        status = <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;mutex-&gt;<a class="code hl_variable" href="structmutex__t.html#a1f98447d6499761302bced3bffa03c12">binary_semaphore</a>-&gt;<a class="code hl_variable" href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">task_waiting_list</a>, &amp;<a class="code hl_struct" href="structelement.html">element</a>, &amp;task);</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>) {</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>            <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>        }</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>    }</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a>) {</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a8b45a206ff9b1c7bb7a145ee1b51ac89">KERNEL_UNABLE_TO_RELEASE_MUTEX</a>);</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    }</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span> </div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span> </div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span> </div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>}</div>
</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span> </div>
<div class="foldopen" id="foldopen01157" data-start="{" data-end="}">
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ad7cc8dd7d3cf63ec6025a69776d4dcd7"> 1157</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ad7cc8dd7d3cf63ec6025a69776d4dcd7">kernel_mutex_acquire_non_blocking</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span> </div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a>) {</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>;</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    }</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span> </div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>    <span class="comment">// prevent other tasks of manipulating the mutex by blocking the context switch</span></div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span> </div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <span class="comment">// get the requested mutex by the id from the mutex dictionary</span></div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a>* mutex = NULL;</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>);</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>    }</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>    <span class="comment">// try to obtain a token from the mutex</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>    status = <a class="code hl_function" href="mutex_8c.html#ad6c9e2dbb456757b716aabd6fe299500">mutex_acquire_non_blocking</a>(&amp;mutex, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span> </div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    <span class="comment">// acquired mutex and mutex will not be modified</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span> </div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a>) {</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>        <span class="comment">// error happened with the semaphore</span></div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>);</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>    }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span> </div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>}</div>
</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span> </div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span> </div>
<div class="foldopen" id="foldopen01198" data-start="{" data-end="}">
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a411f833deee2f1cab183e806f2bb4801"> 1198</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a411f833deee2f1cab183e806f2bb4801">kernel_mutex_release_non_blocking</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= <a class="code hl_define" href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a>) {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>    }</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span> </div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <span class="comment">// prevent other tasks of manipulating the mutex by blocking the context switch</span></div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span> </div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <span class="comment">// get the requested mutex by the id from the mutex dictionary</span></div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <a class="code hl_struct" href="structmutex__t.html">mutex_t</a>* mutex = NULL;</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a>, <span class="keywordtype">id</span>, (<span class="keywordtype">void</span> **) &amp;mutex);</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>){</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>);</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>    }</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span> </div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>    <span class="comment">// release the mutex and check, if a task can be moved from the waiting list to the corresponding priority group</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    status = <a class="code hl_function" href="mutex_8c.html#aa4559e7319ba40eaf91999b6b713e46c">mutex_release_non_blocking</a>(&amp;mutex, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span> </div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span> </div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a>) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a>);</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    }</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>}</div>
</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span> </div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span> </div>
<div class="foldopen" id="foldopen01235" data-start="{" data-end="}">
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a3d9047069d860f02991ff83e7e29a4f8"> 1235</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a3d9047069d860f02991ff83e7e29a4f8">kernel_delay</a>(<span class="keywordtype">size_t</span> delay_millisecods) {</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <span class="keywordflow">if</span> (delay_millisecods == 0) {</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    }</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span> </div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span> </div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    <span class="comment">// checking for valid linked list</span></div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="linked__list_8c.html#af649002ac74929cfefc3b45488b4e459">linked_list_checking</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>);</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa30cda8ca21e5e2287b91d7340603058">KERNEL_UNABLE_TO_DELAY_TASK</a>);</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    }</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span> </div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    <span class="comment">// iterate over the delayed list and insert the task in the list by a delta</span></div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *iterator = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>;</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <span class="keywordtype">size_t</span> delta_sum = 0;</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *delayed_task = NULL;</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span> </div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="comment">// skip iteration if the list is still empty</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    <span class="keywordflow">while</span> (iterator != NULL) {</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>        <span class="comment">// checking for valid task</span></div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>        delayed_task = (<a class="code hl_struct" href="structtask__t.html">task_t</a> *) iterator-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>        status = <a class="code hl_function" href="task_8c.html#a01484528b00ba93895b706ea4a029302">task_checking</a>(&amp;task);</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa30cda8ca21e5e2287b91d7340603058">KERNEL_UNABLE_TO_DELAY_TASK</a>);</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        }</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span> </div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        <span class="comment">// sum up the deltas to get the delayed time for each task</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        delta_sum += delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a>;</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span> </div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>        <span class="comment">// check for abort conditions</span></div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        <span class="keywordflow">if</span> (delta_sum &gt; delay_millisecods) {</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>            <span class="comment">// task is inserted before an already delayed task</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>            delta_sum -= delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a>;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>            <span class="comment">// update the delta before insertion to update the total delay for the already delayed task</span></div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>            delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a> -= delay_millisecods - delta_sum;</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>            <span class="comment">// go a step back, because the linked list supports only insert after</span></div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>            iterator = iterator-&gt;<a class="code hl_variable" href="structelement.html#abce5214d804268256bdbe35b1009c2c6">previous</a>;</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>        }</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a> == NULL) {</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>            <span class="comment">// end of list reached</span></div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        }</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span> </div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>        iterator = iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>;</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    }</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span> </div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    <span class="comment">// determine the delta time to delay the task</span></div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a> = delay_millisecods - delta_sum;</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span> </div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <span class="comment">// insert task in delayed task list at the corresponding position determined by the iteration</span></div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <span class="comment">// a null iterator would mean to insert the element in the first position</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    status = <a class="code hl_function" href="linked__list_8c.html#ab75388c1349483ec16b0e2d64f794f2c">linked_list_transfer_after</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>, &amp;iterator, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>);</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa30cda8ca21e5e2287b91d7340603058">KERNEL_UNABLE_TO_DELAY_TASK</a>);</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span> </div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span> </div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>}</div>
</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span> </div>
<div class="foldopen" id="foldopen01313" data-start="{" data-end="}">
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a01ac645deea22e3d4deaef4d5ed40e02"> 1313</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a01ac645deea22e3d4deaef4d5ed40e02">kernel_event_receive_timeout</a>(<span class="keywordtype">size_t</span> *received_events) {</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    <span class="comment">// shorten the variables</span></div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <span class="keywordtype">size_t</span> task_wanted_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#a0cce97ea104e155533c6c5011884b4f2">wanted_events</a>;</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    <span class="keywordtype">size_t</span> task_received_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a>;</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>;</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span> </div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span> </div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span> </div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <span class="comment">// abort loop if wanted events were set</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    task_received_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a>;</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    <span class="keywordflow">if</span> ((task_wanted_events &amp; task_received_events) == task_wanted_events) {</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span> </div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>        <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>        status = <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    }</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span> </div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>;</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        <span class="keywordtype">size_t</span> delay_milliseconds = task-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#a8321c8d1dcb982b1a3a635e50ec7874f">timeout</a>;</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>        <span class="comment">// insert in delayed task list</span></div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>        <span class="keywordflow">if</span> (delay_milliseconds == 0) {</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>;</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>        }</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span> </div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        <span class="comment">// checking for valid linked list</span></div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>        <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="linked__list_8c.html#af649002ac74929cfefc3b45488b4e459">linked_list_checking</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>);</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>);</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>        }</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span> </div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>        <span class="comment">// iterate over the delayed list and insert the task in the list by a delta</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>        <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *iterator = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>;</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>        <span class="keywordtype">size_t</span> delta_sum = 0;</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>        <a class="code hl_struct" href="structtask__t.html">task_t</a> *delayed_task = NULL;</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span> </div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>        <span class="comment">// skip iteration if the list is still empty</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>        <span class="keywordflow">while</span> (iterator != NULL) {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span> </div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>            <span class="comment">// checking for valid task</span></div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>            delayed_task = (<a class="code hl_struct" href="structtask__t.html">task_t</a> *) iterator-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>            status = <a class="code hl_function" href="task_8c.html#a01484528b00ba93895b706ea4a029302">task_checking</a>(&amp;task);</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>            <span class="keywordflow">if</span> (status != <a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>                <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>);</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>            }</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span> </div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>            <span class="comment">// sum up the deltas to get the delayed time for each task</span></div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>            delta_sum += delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a>;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span> </div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>            <span class="comment">// check for abort conditions</span></div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>            <span class="keywordflow">if</span> (delta_sum &gt; delay_milliseconds) {</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                <span class="comment">// task is inserted before an already delayed task</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>                delta_sum -= delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a>;</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>                <span class="comment">// update the delta before insertion to update the total delay for the already delayed task</span></div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>                delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a> -= delay_milliseconds - delta_sum;</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>                <span class="comment">// go a step back, because the linked list supports only insert after</span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>                iterator = iterator-&gt;<a class="code hl_variable" href="structelement.html#abce5214d804268256bdbe35b1009c2c6">previous</a>;</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>            }</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a> == NULL) {</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>                <span class="comment">// end of list reached</span></div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>            }</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span> </div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>            iterator = iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>;</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>        }</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span> </div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>        <span class="comment">// determine the delta time to delay the task</span></div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a> = delay_milliseconds - delta_sum;</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span> </div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>        <span class="comment">// insert task in delayed task list at the corresponding position determined by the iteration</span></div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>        <span class="comment">// a null iterator would mean to insert the element in the first position</span></div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>        status = <a class="code hl_function" href="linked__list_8c.html#ab75388c1349483ec16b0e2d64f794f2c">linked_list_transfer_after</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>, &amp;iterator, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>);</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>);</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>        }</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span> </div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>        <span class="keywordflow">if</span> (iterator == NULL) {</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>            status = <a class="code hl_function" href="task_8c.html#a993e35de544bf050671e5de34a227697">task_set_blocked_info</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>);</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>        }</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>            status = <a class="code hl_function" href="task_8c.html#a993e35de544bf050671e5de34a227697">task_set_blocked_info</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>, &amp;iterator-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>);</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>        }</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>);</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>        }</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span> </div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span> </div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>        task_received_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a>;</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>        <span class="keywordflow">if</span> ((task_wanted_events &amp; task_received_events) == task_wanted_events) {</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>            status = <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>        }</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>        <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    }</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span> </div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>    <span class="comment">// provide set events</span></div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>    *received_events = task_received_events;</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span> </div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>    <span class="comment">// delete received events</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a> &amp;= ~g_running_task_current-&gt;event_register.wanted_events;</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>}</div>
</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span> </div>
<div class="foldopen" id="foldopen01429" data-start="{" data-end="}">
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#abb40fc691b0a83f09450a1e8b279147f"> 1429</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#abb40fc691b0a83f09450a1e8b279147f">kernel_event_receive_blocking</a>(<span class="keywordtype">size_t</span> *received_events) {</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span> </div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>    <span class="comment">// shorten the variables</span></div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>    <span class="keywordtype">size_t</span> task_wanted_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#a0cce97ea104e155533c6c5011884b4f2">wanted_events</a>;</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    <span class="keywordtype">size_t</span> task_received_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a>;</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span> </div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="comment">// preconfigure error</span></div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>        <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span> </div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>        <span class="comment">// abort loop if wanted events were set</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        task_received_events = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a>;</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>        <span class="keywordflow">if</span> ((task_wanted_events &amp; task_received_events) == task_wanted_events) {</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span> </div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>            <span class="comment">// ------------------- critical section end ----------------------------</span></div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>            status = <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        }</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span> </div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>        <span class="comment">// transfer to blocked list</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>        status = <a class="code hl_function" href="linked__list_8c.html#a2702c739a8aea4b12cdb348aecd87a89">linked_list_transfer</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>);</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>        <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a>) {</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>);</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        }</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span> </div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>        <span class="comment">// set info, where the task was inserted</span></div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>        status = <a class="code hl_function" href="task_8c.html#a993e35de544bf050671e5de34a227697">task_set_blocked_info</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>-&gt;<a class="code hl_variable" href="structlinked__list__t.html#ac5bdd5414578d52c132ddbbbda1aa162">head</a>);</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>        <span class="keywordflow">if</span> (status != <a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a>);</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>        }</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span> </div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>        <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>);</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>    }</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span> </div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>    <span class="comment">// provide set events</span></div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>    *received_events = task_received_events;</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span> </div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    <span class="comment">// delete received events</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a> &amp;= ~g_running_task_current-&gt;event_register.wanted_events;</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>}</div>
</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span> </div>
<div class="foldopen" id="foldopen01483" data-start="{" data-end="}">
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a6ebc25016cb85b109c3aec7f56cfb538"> 1483</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a6ebc25016cb85b109c3aec7f56cfb538">kernel_event_send</a>(<span class="keywordtype">size_t</span> task_id, <span class="keywordtype">size_t</span> event) {</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span> </div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>    <span class="comment">// ------------------- critical section start -------------------------</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span> </div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <span class="comment">// obtain task were an event should be set</span></div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = NULL;</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>, task_id, (<span class="keywordtype">void</span> *) &amp;task);</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#afc90fb5adb6e4b1baa66940855b145dc">KERNEL_UNABLE_TO_SEND_EVENTS</a>);</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    }</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span> </div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <span class="comment">// shorten event variables and notification condition</span></div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>    <span class="keywordtype">size_t</span> wanted_events = task-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#a0cce97ea104e155533c6c5011884b4f2">wanted_events</a>;</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="keywordtype">size_t</span> received_event = task-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a>;</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>    void (*notification_conditions)(<span class="keywordtype">size_t</span> *, size_t) = task-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#aaf68941f7d9974e32edb2a895d8ffec5">notification_conditions</a>;</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>    <span class="comment">// preset received event in order to allow to reset them by the notification condition</span></div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>    received_event |= event;</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span> </div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    <span class="keywordflow">if</span> (notification_conditions!=NULL) {</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>        <span class="comment">// allow to modify the received event</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>        notification_conditions(&amp;received_event, wanted_events);</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>    }</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span> </div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>    <span class="comment">// update received event</span></div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    task-&gt;<a class="code hl_variable" href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">event_register</a>.<a class="code hl_variable" href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">received_events</a> |= received_event;</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span> </div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    <span class="comment">// check if the addressed task can be reinserted</span></div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>    <span class="keywordflow">if</span> ((received_event &amp; wanted_events) == wanted_events) {</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>        <span class="comment">// check if addressed task was inserted in a blocked list or in a delayed task list</span></div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>        <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="structtask__t.html#a067b2eb2540e3ef6262bcc57a52034d8">blocked_timeout_list</a> == <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a>) {</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;task-&gt;<a class="code hl_variable" href="structtask__t.html#a067b2eb2540e3ef6262bcc57a52034d8">blocked_timeout_list</a>, &amp;task-&gt;<a class="code hl_variable" href="structtask__t.html#ab93d4d26491a69f1f649b94abb7e0c15">blocked_timeout_list_element</a>, &amp;task);</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>        }</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (task-&gt;<a class="code hl_variable" href="structtask__t.html#a067b2eb2540e3ef6262bcc57a52034d8">blocked_timeout_list</a> == <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a>) {</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>            <span class="comment">// resume addressed task before timeout elapsed</span></div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>            <span class="comment">// check for a delayed task and update its delta time</span></div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>            <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> *next_delayed_task_element = task-&gt;<a class="code hl_variable" href="structtask__t.html#ab93d4d26491a69f1f649b94abb7e0c15">blocked_timeout_list_element</a>-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>;</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>            <span class="keywordflow">if</span> (next_delayed_task_element != NULL) {</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>                <a class="code hl_struct" href="structtask__t.html">task_t</a> *next_delayed_task = (<a class="code hl_struct" href="structtask__t.html">task_t</a> *) next_delayed_task_element-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>                status = <a class="code hl_function" href="task_8c.html#a01484528b00ba93895b706ea4a029302">task_checking</a>(&amp;task);</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>                <span class="keywordflow">if</span> (status!=<a class="code hl_define" href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a>) {</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>                    <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#afc90fb5adb6e4b1baa66940855b145dc">KERNEL_UNABLE_TO_SEND_EVENTS</a>);</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>                }</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>                <span class="comment">// update delta time</span></div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>                next_delayed_task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a> += task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a>;</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>                task-&gt;<a class="code hl_variable" href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">delta_time</a> = 0;</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>            }</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span> </div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>            <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(&amp;task-&gt;<a class="code hl_variable" href="structtask__t.html#a067b2eb2540e3ef6262bcc57a52034d8">blocked_timeout_list</a>, &amp;task-&gt;<a class="code hl_variable" href="structtask__t.html#ab93d4d26491a69f1f649b94abb7e0c15">blocked_timeout_list_element</a>, &amp;task);</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>        }</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span> </div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>        <span class="comment">// addressed task is no longer inserted in a delayed task list or blocked list</span></div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>        task-&gt;<a class="code hl_variable" href="structtask__t.html#a067b2eb2540e3ef6262bcc57a52034d8">blocked_timeout_list</a> = NULL;</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>        task-&gt;<a class="code hl_variable" href="structtask__t.html#ab93d4d26491a69f1f649b94abb7e0c15">blocked_timeout_list_element</a> = NULL;</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>    }</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span> </div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span> </div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>    <span class="comment">// ------------------- critical section end -------------------------</span></div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span> </div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>}</div>
</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span> </div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span> </div>
<div class="foldopen" id="foldopen01552" data-start="{" data-end="}">
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a4dafd2415b509bfd514d0eecd41aa318"> 1552</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a4dafd2415b509bfd514d0eecd41aa318">kernel_exit_to_scheduler</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span> </div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>    <a class="code hl_struct" href="structtask__t.html">task_t</a> *task = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a>;</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span> </div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>    <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>();</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>    status = <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a82d3d38923c236ae08d1e1171ef761db">kernel_start_task</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a269a52e775212b39ab9b36749e8c784f">g_priority_group_next</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a0af8b83c448299a32985cf85b970a9be">g_linked_list_task_iterator_next</a>, &amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7901950415e33fca551eaf4d1653ed13">g_running_task_next</a>);</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span> </div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>    <span class="comment">// Catch task</span></div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="keywordflow">while</span>(task-&gt;<a class="code hl_variable" href="structtask__t.html#a1fb5ad058d827429ec22745171fcd22b">task_data</a>-&gt;<a class="code hl_variable" href="structTCB__sctTCB__t.html#ab010baa4ac75ac6c7af73de0da2774d0">eTaskState</a> != <a class="code hl_enumvalue" href="tcb_8h.html#a528049fed79c5587395da2377d5d0570ace7df1fea4c86c0a61fad5a3ddc599bc">TaskState_Running</a>);</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span> </div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    <span class="keywordflow">return</span> status;</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>}</div>
</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span> </div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span><span class="comment">/* Debug module functions (implementation) */</span></div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span><a class="code hl_struct" href="structdictionary__t.html">dictionary_t</a>* kernel_debug_get_list_of_tasks(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a>;</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>}</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span> </div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span><span class="comment">/* Static module functions (implementation) */</span></div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span> </div>
<div class="foldopen" id="foldopen01579" data-start="{" data-end="}">
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6"> 1579</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a>) {</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>        <a class="code hl_function" href="stm_2kernel_2kernel_8c.html#ad0710a90c578c112db22235646936a20">kernel_disable_interrupts</a>();</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    }</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        <a class="code hl_function" href="stm_2kernel_2kernel_8c.html#a01d4886f9d86ae45f1194ce65a617c0f">kernel_enable_interrupts</a>();</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    }</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>    <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a> = !<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a>;</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>}</div>
</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span> </div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span> </div>
<div class="foldopen" id="foldopen01599" data-start="{" data-end="}">
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"><a class="line" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc"> 1599</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a>(<a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a> **source, <a class="code hl_struct" href="structelement.html">linked_list_element_t</a> **<a class="code hl_struct" href="structelement.html">element</a>, <a class="code hl_struct" href="structtask__t.html">task_t</a> **task) {</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>    <span class="comment">// get the priority group for the task</span></div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>    <a class="code hl_struct" href="structlinked__list__t.html">linked_list_t</a>* priority_group = NULL;</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>    <span class="keywordtype">size_t</span> status = <a class="code hl_function" href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a>(&amp;<a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a>, (*task)-&gt;task_data-&gt;u8TaskPrio, (<span class="keywordtype">void</span> **) &amp;priority_group);</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a>) {</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a04eb6401fd0ba5edf9fbf701b4eef2c1">KERNEL_UNABLE_TO_REINSERT_TASK</a>);</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>    }</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span> </div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span> </div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>    <span class="comment">// transfer the task from the source list to its priority group</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    status = <a class="code hl_function" href="linked__list_8c.html#a2702c739a8aea4b12cdb348aecd87a89">linked_list_transfer</a>(&amp;priority_group, source, <a class="code hl_struct" href="structelement.html">element</a>);</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="linked__list_8h.html#a62873b037fb5ea0d59890a0536f261ce">LINKED_LIST_ELEMENT_SUCCESS</a>) {</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a>(status, <a class="code hl_define" href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a>, <a class="code hl_define" href="kernel_8h.html#a04eb6401fd0ba5edf9fbf701b4eef2c1">KERNEL_UNABLE_TO_REINSERT_TASK</a>);</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    }</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span> </div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    <span class="comment">// mark task as ready again</span></div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    <a class="code hl_function" href="task_8c.html#adda51d8ef0b37521b25acb7d883a01c4">task_set_state</a>(task, <a class="code hl_enumvalue" href="tcb_8h.html#a528049fed79c5587395da2377d5d0570a598fa38161223df5b42408a475799a53">TaskState_Ready</a>);</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span> </div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    <span class="comment">// the reinserted tasks priority might be higher than the current priority list</span></div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    <span class="comment">// or the kernel wakes up from idle</span></div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    <span class="keywordtype">size_t</span> incoming_priority = (*task)-&gt;task_data-&gt;u8TaskPrio;</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>    <span class="keywordflow">if</span> (incoming_priority &lt; <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a32c6a247d7774b1962eafa56fd521dd7">g_dictionary_priority</a> || <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#ab7526169fb1376f757c464e93703a83e">g_kernel_status</a> == <a class="code hl_enumvalue" href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2a7bbd096755509bb8470171cbb4df302b">EN_KERNEL_IDLE</a>) {</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a269a52e775212b39ab9b36749e8c784f">g_priority_group_next</a> = priority_group;</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a0af8b83c448299a32985cf85b970a9be">g_linked_list_task_iterator_next</a> = priority_group-&gt;<a class="code hl_variable" href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">tail</a>;</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7901950415e33fca551eaf4d1653ed13">g_running_task_next</a> = *task;</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a105788c2e945106a04bcc0ae7dada0e2">g_dictionary_priority_next</a> = incoming_priority;</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a32c6a247d7774b1962eafa56fd521dd7">g_dictionary_priority</a> = incoming_priority;</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    }</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>        <span class="comment">// it is important to update the next task logic, if the moved task belongs to the current running priority group</span></div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a0af8b83c448299a32985cf85b970a9be">g_linked_list_task_iterator_next</a> = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a>-&gt;<a class="code hl_variable" href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">next</a>;</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>        <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a7901950415e33fca551eaf4d1653ed13">g_running_task_next</a> = <a class="code hl_variable" href="src_2kernel_2kernel_8c.html#a0af8b83c448299a32985cf85b970a9be">g_linked_list_task_iterator_next</a>-&gt;<a class="code hl_variable" href="structelement.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>    }</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span> </div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span> </div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a>;</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>}</div>
</div>
<div class="ttc" id="adictionary_8c_html_a004a569e92c8b61b43e2c1aeb9635c10"><div class="ttname"><a href="dictionary_8c.html#a004a569e92c8b61b43e2c1aeb9635c10">dictionary_create</a></div><div class="ttdeci">size_t dictionary_create(dictionary_t **dictionary, size_t size)</div><div class="ttdoc">Creates an empty dictionary with the given size.</div><div class="ttdef"><b>Definition</b> <a href="dictionary_8c_source.html#l00045">dictionary.c:45</a></div></div>
<div class="ttc" id="adictionary_8c_html_aa2e04eccac802b9fc8101d518979b733"><div class="ttname"><a href="dictionary_8c.html#aa2e04eccac802b9fc8101d518979b733">dictionary_add</a></div><div class="ttdeci">size_t dictionary_add(dictionary_t **dictionary, size_t key, void **value)</div><div class="ttdoc">Adds or overwrites an entry to the dictionary.</div><div class="ttdef"><b>Definition</b> <a href="dictionary_8c_source.html#l00094">dictionary.c:94</a></div></div>
<div class="ttc" id="adictionary_8c_html_ac502288081c3e531a135c1aa7e46bdce"><div class="ttname"><a href="dictionary_8c.html#ac502288081c3e531a135c1aa7e46bdce">dictionary_get</a></div><div class="ttdeci">size_t dictionary_get(dictionary_t **dictionary, size_t key, void **value)</div><div class="ttdoc">Reads the value of a specified entry in the dictionary.</div><div class="ttdef"><b>Definition</b> <a href="dictionary_8c_source.html#l00120">dictionary.c:120</a></div></div>
<div class="ttc" id="adictionary_8c_html_ae6bc6def8de33ff78ef6ed35754cde34"><div class="ttname"><a href="dictionary_8c.html#ae6bc6def8de33ff78ef6ed35754cde34">dictionary_delete</a></div><div class="ttdeci">size_t dictionary_delete(dictionary_t **dictionary)</div><div class="ttdef"><b>Definition</b> <a href="dictionary_8c_source.html#l00068">dictionary.c:68</a></div></div>
<div class="ttc" id="adictionary_8h_html_a45d937bcd1f52e7b2107dfa7a8d703c7"><div class="ttname"><a href="dictionary_8h.html#a45d937bcd1f52e7b2107dfa7a8d703c7">DICTIONARY_VALUE_IS_NULL</a></div><div class="ttdeci">#define DICTIONARY_VALUE_IS_NULL</div><div class="ttdef"><b>Definition</b> <a href="dictionary_8h_source.html#l00037">dictionary.h:37</a></div></div>
<div class="ttc" id="adictionary_8h_html_aa6c25a3ad4071d9b0f0c5ad777dc29ae"><div class="ttname"><a href="dictionary_8h.html#aa6c25a3ad4071d9b0f0c5ad777dc29ae">DICTIONARY_SUCCESS</a></div><div class="ttdeci">#define DICTIONARY_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="dictionary_8h_source.html#l00033">dictionary.h:33</a></div></div>
<div class="ttc" id="akernel_8h_html"><div class="ttname"><a href="kernel_8h.html">kernel.h</a></div></div>
<div class="ttc" id="akernel_8h_html_a04eb6401fd0ba5edf9fbf701b4eef2c1"><div class="ttname"><a href="kernel_8h.html#a04eb6401fd0ba5edf9fbf701b4eef2c1">KERNEL_UNABLE_TO_REINSERT_TASK</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_REINSERT_TASK</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00099">kernel.h:99</a></div></div>
<div class="ttc" id="akernel_8h_html_a062a865fa58c0214343e1ea09bf97e48"><div class="ttname"><a href="kernel_8h.html#a062a865fa58c0214343e1ea09bf97e48">KERNEL_UNABLE_TO_ADD_TASK</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_ADD_TASK</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00083">kernel.h:83</a></div></div>
<div class="ttc" id="akernel_8h_html_a0c69cfb550fc4e05d709e82364ea39ec"><div class="ttname"><a href="kernel_8h.html#a0c69cfb550fc4e05d709e82364ea39ec">KERNEL_MAX_MUTEX</a></div><div class="ttdeci">#define KERNEL_MAX_MUTEX</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00077">kernel.h:77</a></div></div>
<div class="ttc" id="akernel_8h_html_a16d9031d44522ccc82aa2f0b55061b61"><div class="ttname"><a href="kernel_8h.html#a16d9031d44522ccc82aa2f0b55061b61">KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_ACQUIRE_SEMAPHORE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00090">kernel.h:90</a></div></div>
<div class="ttc" id="akernel_8h_html_a1db81878d09c9e8ce28b945aa52e0a80"><div class="ttname"><a href="kernel_8h.html#a1db81878d09c9e8ce28b945aa52e0a80">KERNEL_NO_TERMINATED_TASKS_LIST</a></div><div class="ttdeci">#define KERNEL_NO_TERMINATED_TASKS_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00114">kernel.h:114</a></div></div>
<div class="ttc" id="akernel_8h_html_a2380b988e8a35552fe5f297d791fcb1d"><div class="ttname"><a href="kernel_8h.html#a2380b988e8a35552fe5f297d791fcb1d">KERNEL_UNABLE_TO_DELETE_MUTEX_LIST</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_MUTEX_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00120">kernel.h:120</a></div></div>
<div class="ttc" id="akernel_8h_html_a23bfbf40fe27cfcb01cfb777aedb8035"><div class="ttname"><a href="kernel_8h.html#a23bfbf40fe27cfcb01cfb777aedb8035">KERNEL_UNEXPECTED_SEMAPHORE_AVAILABILTY</a></div><div class="ttdeci">#define KERNEL_UNEXPECTED_SEMAPHORE_AVAILABILTY</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00094">kernel.h:94</a></div></div>
<div class="ttc" id="akernel_8h_html_a298af722690911e21663f7852ddba29f"><div class="ttname"><a href="kernel_8h.html#a298af722690911e21663f7852ddba29f">KERNEL_UNABLE_TO_RECEIVE_MESSAGE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_RECEIVE_MESSAGE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00087">kernel.h:87</a></div></div>
<div class="ttc" id="akernel_8h_html_a2a303d7e4d73d47f77d2bffdcb4081ac"><div class="ttname"><a href="kernel_8h.html#a2a303d7e4d73d47f77d2bffdcb4081ac">KERNEL_DICTIONARY_ERROR_REGISTER</a></div><div class="ttdeci">#define KERNEL_DICTIONARY_ERROR_REGISTER</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00129">kernel.h:129</a></div></div>
<div class="ttc" id="akernel_8h_html_a2f21e608a12df2d4928979517460cbd5"><div class="ttname"><a href="kernel_8h.html#a2f21e608a12df2d4928979517460cbd5">KERNEL_MUTEX_ERROR_REGISTER</a></div><div class="ttdeci">#define KERNEL_MUTEX_ERROR_REGISTER</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00134">kernel.h:134</a></div></div>
<div class="ttc" id="akernel_8h_html_a325d67406d4c640587941d922e8b5cd1"><div class="ttname"><a href="kernel_8h.html#a325d67406d4c640587941d922e8b5cd1">KERNEL_UNABLE_TO_DELETE_MUTEX</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_MUTEX</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00111">kernel.h:111</a></div></div>
<div class="ttc" id="akernel_8h_html_a3935f6352152e611973a1211d1334ee8"><div class="ttname"><a href="kernel_8h.html#a3935f6352152e611973a1211d1334ee8">KERNEL_UNABLE_TO_CREATE_MUTEX</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_CREATE_MUTEX</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00110">kernel.h:110</a></div></div>
<div class="ttc" id="akernel_8h_html_a3c25e698284734efaa98b3266d27c108"><div class="ttname"><a href="kernel_8h.html#a3c25e698284734efaa98b3266d27c108">KERNEL_NO_BLOCKED_TASKS</a></div><div class="ttdeci">#define KERNEL_NO_BLOCKED_TASKS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00102">kernel.h:102</a></div></div>
<div class="ttc" id="akernel_8h_html_a3c501276ec5c9892620f2efebb55ead2"><div class="ttname"><a href="kernel_8h.html#a3c501276ec5c9892620f2efebb55ead2">KERNEL_NO_LIST_OF_TASKS</a></div><div class="ttdeci">#define KERNEL_NO_LIST_OF_TASKS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00101">kernel.h:101</a></div></div>
<div class="ttc" id="akernel_8h_html_a4c6d121b2dd29e1979b126f8d5208d36"><div class="ttname"><a href="kernel_8h.html#a4c6d121b2dd29e1979b126f8d5208d36">KERNEL_MAX_SEMAPHORE</a></div><div class="ttdeci">#define KERNEL_MAX_SEMAPHORE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00076">kernel.h:76</a></div></div>
<div class="ttc" id="akernel_8h_html_a4db0a2552dfbcdc53937ddf1a70959a3"><div class="ttname"><a href="kernel_8h.html#a4db0a2552dfbcdc53937ddf1a70959a3">KERNEL_UNABLE_TO_DELETE_SEMAPHORE_LIST</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_SEMAPHORE_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00119">kernel.h:119</a></div></div>
<div class="ttc" id="akernel_8h_html_a4f747e7c4da2d7409b2123c387b048ab"><div class="ttname"><a href="kernel_8h.html#a4f747e7c4da2d7409b2123c387b048ab">KERNEL_SUCCESS</a></div><div class="ttdeci">#define KERNEL_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00080">kernel.h:80</a></div></div>
<div class="ttc" id="akernel_8h_html_a54a024dfd1a2ec03d045e57d8d641e3f"><div class="ttname"><a href="kernel_8h.html#a54a024dfd1a2ec03d045e57d8d641e3f">KERNEL_UNABLE_TO_DELETE_PRIORITIZED_TASKS</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_PRIORITIZED_TASKS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00117">kernel.h:117</a></div></div>
<div class="ttc" id="akernel_8h_html_a558709e5078f9f4d278d02b100ffb25e"><div class="ttname"><a href="kernel_8h.html#a558709e5078f9f4d278d02b100ffb25e">KERNEL_UNABLE_TO_ADD_MESSAGE_QUEUE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_ADD_MESSAGE_QUEUE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00084">kernel.h:84</a></div></div>
<div class="ttc" id="akernel_8h_html_a55c7b88956349dcba6b680d59ab2a2d4"><div class="ttname"><a href="kernel_8h.html#a55c7b88956349dcba6b680d59ab2a2d4">KERNEL_UNABLE_TO_DELETE_PRIORITY_LIST</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_PRIORITY_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00123">kernel.h:123</a></div></div>
<div class="ttc" id="akernel_8h_html_a566abc9d376487a5cfdbc47862f10e0d"><div class="ttname"><a href="kernel_8h.html#a566abc9d376487a5cfdbc47862f10e0d">KERNEL_MAX_MESSAGE_QUEUE</a></div><div class="ttdeci">#define KERNEL_MAX_MESSAGE_QUEUE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00074">kernel.h:74</a></div></div>
<div class="ttc" id="akernel_8h_html_a6596b7c0820eb40a2a3038053e7d2643"><div class="ttname"><a href="kernel_8h.html#a6596b7c0820eb40a2a3038053e7d2643">KERNEL_MAX_TASK</a></div><div class="ttdeci">#define KERNEL_MAX_TASK</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00073">kernel.h:73</a></div></div>
<div class="ttc" id="akernel_8h_html_a684cf5b9cdd027f8e4b246347b8d3cfd"><div class="ttname"><a href="kernel_8h.html#a684cf5b9cdd027f8e4b246347b8d3cfd">KERNEL_UNABLE_TO_CHANGE_TASK_PRIORITY</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_CHANGE_TASK_PRIORITY</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00113">kernel.h:113</a></div></div>
<div class="ttc" id="akernel_8h_html_a6b9019e7f37f0cb8e9055d6b54a325c2"><div class="ttname"><a href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2">Kernel_Status_e</a></div><div class="ttdeci">Kernel_Status_e</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00137">kernel.h:137</a></div></div>
<div class="ttc" id="akernel_8h_html_a6b9019e7f37f0cb8e9055d6b54a325c2a2185a5e4d0913f3dcf9ebc3f1c6a7bf3"><div class="ttname"><a href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2a2185a5e4d0913f3dcf9ebc3f1c6a7bf3">EN_KERNEL_STARTING</a></div><div class="ttdeci">@ EN_KERNEL_STARTING</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00139">kernel.h:139</a></div></div>
<div class="ttc" id="akernel_8h_html_a6b9019e7f37f0cb8e9055d6b54a325c2a7bbd096755509bb8470171cbb4df302b"><div class="ttname"><a href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2a7bbd096755509bb8470171cbb4df302b">EN_KERNEL_IDLE</a></div><div class="ttdeci">@ EN_KERNEL_IDLE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00142">kernel.h:142</a></div></div>
<div class="ttc" id="akernel_8h_html_a6b9019e7f37f0cb8e9055d6b54a325c2a92425f6b2d60450b04c70acddc6b9a59"><div class="ttname"><a href="kernel_8h.html#a6b9019e7f37f0cb8e9055d6b54a325c2a92425f6b2d60450b04c70acddc6b9a59">EN_KERNEL_RUNNING</a></div><div class="ttdeci">@ EN_KERNEL_RUNNING</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00140">kernel.h:140</a></div></div>
<div class="ttc" id="akernel_8h_html_a7095d15e00fadd2d08b10c280c962805"><div class="ttname"><a href="kernel_8h.html#a7095d15e00fadd2d08b10c280c962805">KERNEL_SEMAPHORE_ERROR_REGISTER</a></div><div class="ttdeci">#define KERNEL_SEMAPHORE_ERROR_REGISTER</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00133">kernel.h:133</a></div></div>
<div class="ttc" id="akernel_8h_html_a7e606e2b231f26b0df595b49c90017e9"><div class="ttname"><a href="kernel_8h.html#a7e606e2b231f26b0df595b49c90017e9">KERNEL_NO_SEMAPHORES</a></div><div class="ttdeci">#define KERNEL_NO_SEMAPHORES</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00088">kernel.h:88</a></div></div>
<div class="ttc" id="akernel_8h_html_a8b45a206ff9b1c7bb7a145ee1b51ac89"><div class="ttname"><a href="kernel_8h.html#a8b45a206ff9b1c7bb7a145ee1b51ac89">KERNEL_UNABLE_TO_RELEASE_MUTEX</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_RELEASE_MUTEX</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00109">kernel.h:109</a></div></div>
<div class="ttc" id="akernel_8h_html_a8f1a7bd7554d901023ab2a03b3694a1c"><div class="ttname"><a href="kernel_8h.html#a8f1a7bd7554d901023ab2a03b3694a1c">KERNEL_LINK_LIST_ERROR_REGISTER</a></div><div class="ttdeci">#define KERNEL_LINK_LIST_ERROR_REGISTER</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00130">kernel.h:130</a></div></div>
<div class="ttc" id="akernel_8h_html_a8f5e6b1171eb0eca244f2e13b8ec3e24"><div class="ttname"><a href="kernel_8h.html#a8f5e6b1171eb0eca244f2e13b8ec3e24">KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_RELEASE_SEMAPHORE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00091">kernel.h:91</a></div></div>
<div class="ttc" id="akernel_8h_html_aa30cda8ca21e5e2287b91d7340603058"><div class="ttname"><a href="kernel_8h.html#aa30cda8ca21e5e2287b91d7340603058">KERNEL_UNABLE_TO_DELAY_TASK</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELAY_TASK</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00100">kernel.h:100</a></div></div>
<div class="ttc" id="akernel_8h_html_aa67fb1a8d7b7294e6567b523f0e7045a"><div class="ttname"><a href="kernel_8h.html#aa67fb1a8d7b7294e6567b523f0e7045a">KERNEL_UNABLE_TO_RECEIVE_EVENTS</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_RECEIVE_EVENTS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00105">kernel.h:105</a></div></div>
<div class="ttc" id="akernel_8h_html_aa7a514b60bddba6d757556f1a17b68dc"><div class="ttname"><a href="kernel_8h.html#aa7a514b60bddba6d757556f1a17b68dc">KERNEL_TASK_ERROR_REGISTER</a></div><div class="ttdeci">#define KERNEL_TASK_ERROR_REGISTER</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00131">kernel.h:131</a></div></div>
<div class="ttc" id="akernel_8h_html_ab5c2dda7bb916476bce65178668bb29d"><div class="ttname"><a href="kernel_8h.html#ab5c2dda7bb916476bce65178668bb29d">KERNEL_UNABLE_TO_DELETE_BLOCKED_LIST</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_BLOCKED_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00121">kernel.h:121</a></div></div>
<div class="ttc" id="akernel_8h_html_abac08fa584d68909fa4a2e9dde23b014"><div class="ttname"><a href="kernel_8h.html#abac08fa584d68909fa4a2e9dde23b014">KERNEL_NO_DELAYED_TASKS</a></div><div class="ttdeci">#define KERNEL_NO_DELAYED_TASKS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00082">kernel.h:82</a></div></div>
<div class="ttc" id="akernel_8h_html_abbb97ba6bcaee252c0f28e39dcc8774b"><div class="ttname"><a href="kernel_8h.html#abbb97ba6bcaee252c0f28e39dcc8774b">KERNEL_UNABLE_TO_ADD_SEMAPHORE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_ADD_SEMAPHORE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00089">kernel.h:89</a></div></div>
<div class="ttc" id="akernel_8h_html_abd562ec85481a947c197003c0b5499f7"><div class="ttname"><a href="kernel_8h.html#abd562ec85481a947c197003c0b5499f7">KERNEL_UNABLE_TO_DELETE_LIST_OF_TASKS</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_LIST_OF_TASKS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00116">kernel.h:116</a></div></div>
<div class="ttc" id="akernel_8h_html_ac19215df2c8d1edc8313813348cd8ead"><div class="ttname"><a href="kernel_8h.html#ac19215df2c8d1edc8313813348cd8ead">KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE_LIST</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00118">kernel.h:118</a></div></div>
<div class="ttc" id="akernel_8h_html_ac7bac8978e66081ed7fec5769206dac5"><div class="ttname"><a href="kernel_8h.html#ac7bac8978e66081ed7fec5769206dac5">KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_MESSAGE_QUEUE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00085">kernel.h:85</a></div></div>
<div class="ttc" id="akernel_8h_html_ad275af0477e10f1a9e2778e2a49061a4"><div class="ttname"><a href="kernel_8h.html#ad275af0477e10f1a9e2778e2a49061a4">KERNEL_NO_MUTEXES</a></div><div class="ttdeci">#define KERNEL_NO_MUTEXES</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00106">kernel.h:106</a></div></div>
<div class="ttc" id="akernel_8h_html_ad627e2d75745f79db3176e42b7a1019f"><div class="ttname"><a href="kernel_8h.html#ad627e2d75745f79db3176e42b7a1019f">KERNEL_UNABLE_TO_ACQUIRE_MUTEX</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_ACQUIRE_MUTEX</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00108">kernel.h:108</a></div></div>
<div class="ttc" id="akernel_8h_html_ad8b9b3b4446af71f519d8b18f3f0dde4"><div class="ttname"><a href="kernel_8h.html#ad8b9b3b4446af71f519d8b18f3f0dde4">KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</a></div><div class="ttdeci">#define KERNEL_MESSAGE_QUEUE_ERROR_REGISTER</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00132">kernel.h:132</a></div></div>
<div class="ttc" id="akernel_8h_html_ae4f356e6ba832f5e410ad230f8608034"><div class="ttname"><a href="kernel_8h.html#ae4f356e6ba832f5e410ad230f8608034">KERNEL_UNABLE_TO_DELETE_TERMINATED_LIST</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_TERMINATED_LIST</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00122">kernel.h:122</a></div></div>
<div class="ttc" id="akernel_8h_html_ae6c6e53a9532c82a1ba22e0ea8b8f155"><div class="ttname"><a href="kernel_8h.html#ae6c6e53a9532c82a1ba22e0ea8b8f155">KERNEL_NO_PRIORITIZED_TASKS</a></div><div class="ttdeci">#define KERNEL_NO_PRIORITIZED_TASKS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00081">kernel.h:81</a></div></div>
<div class="ttc" id="akernel_8h_html_aec0d7fd297264581da7a435d542b8c94"><div class="ttname"><a href="kernel_8h.html#aec0d7fd297264581da7a435d542b8c94">KERNEL_UNABLE_TO_DELETE_SEMAPHORE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_DELETE_SEMAPHORE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00093">kernel.h:93</a></div></div>
<div class="ttc" id="akernel_8h_html_aedca7a1ef79f08dcd9632e2b36abda82"><div class="ttname"><a href="kernel_8h.html#aedca7a1ef79f08dcd9632e2b36abda82">KERNEL_UNABLE_TO_SEND_MESSAGE</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_SEND_MESSAGE</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00086">kernel.h:86</a></div></div>
<div class="ttc" id="akernel_8h_html_afc90fb5adb6e4b1baa66940855b145dc"><div class="ttname"><a href="kernel_8h.html#afc90fb5adb6e4b1baa66940855b145dc">KERNEL_UNABLE_TO_SEND_EVENTS</a></div><div class="ttdeci">#define KERNEL_UNABLE_TO_SEND_EVENTS</div><div class="ttdef"><b>Definition</b> <a href="kernel_8h_source.html#l00104">kernel.h:104</a></div></div>
<div class="ttc" id="alinked__list_8c_html_a00841e8f45c8c8ae67d894e1a90d3dcb"><div class="ttname"><a href="linked__list_8c.html#a00841e8f45c8c8ae67d894e1a90d3dcb">linked_list_move_linked_list_after</a></div><div class="ttdeci">size_t linked_list_move_linked_list_after(linked_list_t **linked_list_destination, linked_list_t **linked_list_source)</div><div class="ttdoc">Transfers a linked list element from source to destinations head.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00624">linked_list.c:624</a></div></div>
<div class="ttc" id="alinked__list_8c_html_a157221397716f9d0d15a22242168d6d5"><div class="ttname"><a href="linked__list_8c.html#a157221397716f9d0d15a22242168d6d5">linked_list_delete</a></div><div class="ttdeci">size_t linked_list_delete(linked_list_t **linked_list)</div><div class="ttdoc">Deletes a linked list including all of its elements.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00091">linked_list.c:91</a></div></div>
<div class="ttc" id="alinked__list_8c_html_a2702c739a8aea4b12cdb348aecd87a89"><div class="ttname"><a href="linked__list_8c.html#a2702c739a8aea4b12cdb348aecd87a89">linked_list_transfer</a></div><div class="ttdeci">size_t linked_list_transfer(linked_list_t **linked_list_destination, linked_list_t **linked_list_source, linked_list_element_t **linked_list_element)</div><div class="ttdoc">Transfers a linked list element from source to destinations head.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00429">linked_list.c:429</a></div></div>
<div class="ttc" id="alinked__list_8c_html_a33ada9c56ab9e6913088e439cc7cc5bb"><div class="ttname"><a href="linked__list_8c.html#a33ada9c56ab9e6913088e439cc7cc5bb">linked_list_push_front</a></div><div class="ttdeci">size_t linked_list_push_front(linked_list_t **linked_list, void **data)</div><div class="ttdoc">Pushes a new data element to the beginning of the linked list.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00261">linked_list.c:261</a></div></div>
<div class="ttc" id="alinked__list_8c_html_ab75388c1349483ec16b0e2d64f794f2c"><div class="ttname"><a href="linked__list_8c.html#ab75388c1349483ec16b0e2d64f794f2c">linked_list_transfer_after</a></div><div class="ttdeci">size_t linked_list_transfer_after(linked_list_t **linked_list_destination, linked_list_element_t **linked_list_element_destination_after, linked_list_t **linked_list_source, linked_list_element_t **linked_list_element_moving)</div><div class="ttdoc">Transfers a linked list element from source to destinations head.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00519">linked_list.c:519</a></div></div>
<div class="ttc" id="alinked__list_8c_html_ab84dc67b6f40f1f88c3b516453c0115e"><div class="ttname"><a href="linked__list_8c.html#ab84dc67b6f40f1f88c3b516453c0115e">linked_list_create</a></div><div class="ttdeci">size_t linked_list_create(linked_list_t **linked_list)</div><div class="ttdoc">Creates an empty linked list with no elements.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00068">linked_list.c:68</a></div></div>
<div class="ttc" id="alinked__list_8c_html_af649002ac74929cfefc3b45488b4e459"><div class="ttname"><a href="linked__list_8c.html#af649002ac74929cfefc3b45488b4e459">linked_list_checking</a></div><div class="ttdeci">size_t linked_list_checking(linked_list_t **linked_list)</div><div class="ttdoc">Checks whether a linked list is valid.</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8c_source.html#l00675">linked_list.c:675</a></div></div>
<div class="ttc" id="alinked__list_8h_html_a62873b037fb5ea0d59890a0536f261ce"><div class="ttname"><a href="linked__list_8h.html#a62873b037fb5ea0d59890a0536f261ce">LINKED_LIST_ELEMENT_SUCCESS</a></div><div class="ttdeci">#define LINKED_LIST_ELEMENT_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00055">linked_list.h:55</a></div></div>
<div class="ttc" id="alinked__list_8h_html_ac7e6ba5ba80b4bd6ebe13614af226ff2"><div class="ttname"><a href="linked__list_8h.html#ac7e6ba5ba80b4bd6ebe13614af226ff2">LINKED_LIST_SUCCESS</a></div><div class="ttdeci">#define LINKED_LIST_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00054">linked_list.h:54</a></div></div>
<div class="ttc" id="amessage__queue_8c_html_a051e749f70d8ab8b4a8ed34fdb6b44d3"><div class="ttname"><a href="message__queue_8c.html#a051e749f70d8ab8b4a8ed34fdb6b44d3">message_queue_delete</a></div><div class="ttdeci">size_t message_queue_delete(message_queue_t **message_queue)</div><div class="ttdoc">Deletes a message queue.</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00099">message_queue.c:99</a></div></div>
<div class="ttc" id="amessage__queue_8c_html_a2308f343d4d76ed9932c92224e2e10c5"><div class="ttname"><a href="message__queue_8c.html#a2308f343d4d76ed9932c92224e2e10c5">message_queue_create</a></div><div class="ttdeci">size_t message_queue_create(message_queue_t **message_queue, size_t message_queue_size, size_t element_size, size_t id, char *name)</div><div class="ttdoc">Creates a message queue by its size, expected element size, id and name.</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00055">message_queue.c:55</a></div></div>
<div class="ttc" id="amessage__queue_8c_html_a24a7ea0a1b2abb026b78348df2fcb2bb"><div class="ttname"><a href="message__queue_8c.html#a24a7ea0a1b2abb026b78348df2fcb2bb">message_queue_send_blocking</a></div><div class="ttdeci">size_t message_queue_send_blocking(message_queue_t **message_queue, linked_list_t **running_task_list, linked_list_element_t **sender_element, linked_list_element_t **receiver_element, task_t **receiver_task, void *message, size_t element_size, bool urgent)</div><div class="ttdoc">Sends a message to a task. The task can be blocked by insertion to the sending waiting list....</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00216">message_queue.c:216</a></div></div>
<div class="ttc" id="amessage__queue_8c_html_aaede9925afd52fbc4445d73517ddf2b5"><div class="ttname"><a href="message__queue_8c.html#aaede9925afd52fbc4445d73517ddf2b5">message_queue_receive</a></div><div class="ttdeci">size_t message_queue_receive(message_queue_t **message_queue, linked_list_t **running_task_list, linked_list_element_t **running_task_element, task_t **receiver_task, linked_list_element_t **sender_element, task_t **sender_task, void **message)</div><div class="ttdoc">Receive a message.</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00251">message_queue.c:251</a></div></div>
<div class="ttc" id="amessage__queue_8c_html_adad5b1beada3120a6e8639f95979b38d"><div class="ttname"><a href="message__queue_8c.html#adad5b1beada3120a6e8639f95979b38d">message_queue_send</a></div><div class="ttdeci">size_t message_queue_send(message_queue_t **message_queue, linked_list_element_t **element, task_t **task, void *message, size_t element_size, bool urgent)</div><div class="ttdoc">Sends a message to a task without blocking.</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00147">message_queue.c:147</a></div></div>
<div class="ttc" id="amessage__queue_8c_html_ae66a349dddbf73ee44edf7a25fee1682"><div class="ttname"><a href="message__queue_8c.html#ae66a349dddbf73ee44edf7a25fee1682">message_queue_identifier_checking</a></div><div class="ttdeci">size_t message_queue_identifier_checking(message_queue_identifier_t **message_queue_identifier)</div><div class="ttdoc">Checks whether a queue identifier is valid.</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00318">message_queue.c:318</a></div></div>
<div class="ttc" id="amessage__queue_8h_html_a045f2447c86aa9a90db81b46b23258cd"><div class="ttname"><a href="message__queue_8h.html#a045f2447c86aa9a90db81b46b23258cd">MESSAGE_QUEUE_SUCCESS</a></div><div class="ttdeci">#define MESSAGE_QUEUE_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00039">message_queue.h:39</a></div></div>
<div class="ttc" id="amessage__queue_8h_html_a1734a13d5bfd51afa67eaa70b55a1cbe"><div class="ttname"><a href="message__queue_8h.html#a1734a13d5bfd51afa67eaa70b55a1cbe">MESSAGE_QUEUE_IDENTIFIER_SUCCESS</a></div><div class="ttdeci">#define MESSAGE_QUEUE_IDENTIFIER_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00040">message_queue.h:40</a></div></div>
<div class="ttc" id="amessage__queue_8h_html_a3e0013a7a2444bae6a19fde4ad9d0298"><div class="ttname"><a href="message__queue_8h.html#a3e0013a7a2444bae6a19fde4ad9d0298">MESSAGE_QUEUE_UNABLE_TO_SEND</a></div><div class="ttdeci">#define MESSAGE_QUEUE_UNABLE_TO_SEND</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00046">message_queue.h:46</a></div></div>
<div class="ttc" id="amessage__queue_8h_html_accf774052a382c5192305ad60ae90f32"><div class="ttname"><a href="message__queue_8h.html#accf774052a382c5192305ad60ae90f32">MESSAGE_QUEUE_UNABLE_TO_RECEIVE</a></div><div class="ttdeci">#define MESSAGE_QUEUE_UNABLE_TO_RECEIVE</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00047">message_queue.h:47</a></div></div>
<div class="ttc" id="amutex_8c_html_a0ff8eddf876f3efbd8f5ccce5a81f5ea"><div class="ttname"><a href="mutex_8c.html#a0ff8eddf876f3efbd8f5ccce5a81f5ea">mutex_release</a></div><div class="ttdeci">size_t mutex_release(mutex_t **mutex, linked_list_element_t **element, task_t **task)</div><div class="ttdoc">Attempts to a release a mutex. Task supply is managed by semaphore_release if needed.</div><div class="ttdef"><b>Definition</b> <a href="mutex_8c_source.html#l00146">mutex.c:146</a></div></div>
<div class="ttc" id="amutex_8c_html_a9c2d6b9468d5acde3766668563fba4a4"><div class="ttname"><a href="mutex_8c.html#a9c2d6b9468d5acde3766668563fba4a4">mutex_create</a></div><div class="ttdeci">size_t mutex_create(mutex_t **mutex, size_t id)</div><div class="ttdoc">Creates a mutex with an id.</div><div class="ttdef"><b>Definition</b> <a href="mutex_8c_source.html#l00048">mutex.c:48</a></div></div>
<div class="ttc" id="amutex_8c_html_aa4559e7319ba40eaf91999b6b713e46c"><div class="ttname"><a href="mutex_8c.html#aa4559e7319ba40eaf91999b6b713e46c">mutex_release_non_blocking</a></div><div class="ttdeci">size_t mutex_release_non_blocking(mutex_t **mutex, task_t **task)</div><div class="ttdoc">Attempts to a release a mutex. Does not check the waiting list on success.</div><div class="ttdef"><b>Definition</b> <a href="mutex_8c_source.html#l00211">mutex.c:211</a></div></div>
<div class="ttc" id="amutex_8c_html_ad2cceaf0d82159fb4994b157bbe0ba42"><div class="ttname"><a href="mutex_8c.html#ad2cceaf0d82159fb4994b157bbe0ba42">mutex_delete</a></div><div class="ttdeci">size_t mutex_delete(mutex_t **mutex)</div><div class="ttdoc">Deletes a mutex.</div><div class="ttdef"><b>Definition</b> <a href="mutex_8c_source.html#l00075">mutex.c:75</a></div></div>
<div class="ttc" id="amutex_8c_html_ad6c9e2dbb456757b716aabd6fe299500"><div class="ttname"><a href="mutex_8c.html#ad6c9e2dbb456757b716aabd6fe299500">mutex_acquire_non_blocking</a></div><div class="ttdeci">size_t mutex_acquire_non_blocking(mutex_t **mutex, task_t **task)</div><div class="ttdoc">Attempts to a acquire a mutex. Does not move the running task to the waiting list on failure.</div><div class="ttdef"><b>Definition</b> <a href="mutex_8c_source.html#l00178">mutex.c:178</a></div></div>
<div class="ttc" id="amutex_8c_html_afc9945ec990447198a76c8507eec17c3"><div class="ttname"><a href="mutex_8c.html#afc9945ec990447198a76c8507eec17c3">mutex_acquire</a></div><div class="ttdeci">size_t mutex_acquire(mutex_t **mutex, linked_list_t **running_task_list, linked_list_element_t **running_task_element, task_t **task)</div><div class="ttdoc">Attempts to a acquire a mutex. Waiting list is managed by semaphore_acquire if needed.</div><div class="ttdef"><b>Definition</b> <a href="mutex_8c_source.html#l00106">mutex.c:106</a></div></div>
<div class="ttc" id="amutex_8h_html_a315158a164b52a187fff01a5942bb68b"><div class="ttname"><a href="mutex_8h.html#a315158a164b52a187fff01a5942bb68b">MUTEX_OWNED_BY_OTHER_TASK</a></div><div class="ttdeci">#define MUTEX_OWNED_BY_OTHER_TASK</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00041">mutex.h:41</a></div></div>
<div class="ttc" id="amutex_8h_html_abd065826c65695d65aacfbd95883be57"><div class="ttname"><a href="mutex_8h.html#abd065826c65695d65aacfbd95883be57">MUTEX_SUCCESS</a></div><div class="ttdeci">#define MUTEX_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00033">mutex.h:33</a></div></div>
<div class="ttc" id="asemaphore_8c_html_a04e62eb1d82d269d299397ca7ef9c979"><div class="ttname"><a href="semaphore_8c.html#a04e62eb1d82d269d299397ca7ef9c979">semaphore_acquire_non_blocking</a></div><div class="ttdeci">size_t semaphore_acquire_non_blocking(semaphore_t **semaphore)</div><div class="ttdoc">Attempts to a acquire a semaphore. Does not move the running task to the waiting list on failure.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00176">semaphore.c:176</a></div></div>
<div class="ttc" id="asemaphore_8c_html_a0ac7e334a27eb11a5705859c03cffe85"><div class="ttname"><a href="semaphore_8c.html#a0ac7e334a27eb11a5705859c03cffe85">semaphore_is_available</a></div><div class="ttdeci">size_t semaphore_is_available(semaphore_t **semaphore)</div><div class="ttdoc">Checks if a semaphore is avaialable for acquiring.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00213">semaphore.c:213</a></div></div>
<div class="ttc" id="asemaphore_8c_html_a8d50f46b59e703b91b4651f901fc0ac0"><div class="ttname"><a href="semaphore_8c.html#a8d50f46b59e703b91b4651f901fc0ac0">semaphore_release_non_blocking</a></div><div class="ttdeci">size_t semaphore_release_non_blocking(semaphore_t **semaphore)</div><div class="ttdoc">Attempts to a release a semaphore. Does not check the waiting list on success.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00194">semaphore.c:194</a></div></div>
<div class="ttc" id="asemaphore_8c_html_a946c03546b3b583d68e3886f3f1773df"><div class="ttname"><a href="semaphore_8c.html#a946c03546b3b583d68e3886f3f1773df">semaphore_create</a></div><div class="ttdeci">size_t semaphore_create(semaphore_t **semaphore, size_t id, size_t token)</div><div class="ttdoc">Creates a semaphore with an id and its maximum amount of tokens.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00062">semaphore.c:62</a></div></div>
<div class="ttc" id="asemaphore_8c_html_aa571a1fad2e37f0b14b99260cd63f2c8"><div class="ttname"><a href="semaphore_8c.html#aa571a1fad2e37f0b14b99260cd63f2c8">semaphore_release</a></div><div class="ttdeci">size_t semaphore_release(semaphore_t **semaphore, linked_list_element_t **element, task_t **task)</div><div class="ttdoc">Attempts to a release a semaphore. Supplies the first task in the waiting list on success.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00141">semaphore.c:141</a></div></div>
<div class="ttc" id="asemaphore_8c_html_aa7f90041bb84a47eea9c15fd496d72a5"><div class="ttname"><a href="semaphore_8c.html#aa7f90041bb84a47eea9c15fd496d72a5">semaphore_delete</a></div><div class="ttdeci">size_t semaphore_delete(semaphore_t **semaphore)</div><div class="ttdoc">Deletes a semaphore.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00086">semaphore.c:86</a></div></div>
<div class="ttc" id="asemaphore_8c_html_ae192b4355be68c3e15a5063225ce018b"><div class="ttname"><a href="semaphore_8c.html#ae192b4355be68c3e15a5063225ce018b">semaphore_acquire</a></div><div class="ttdeci">size_t semaphore_acquire(semaphore_t **semaphore, linked_list_t **running_task_list, linked_list_element_t **running_task_element, task_t **task)</div><div class="ttdoc">Attempts to a acquire a semaphore. Moves the running task to the waiting list on failure.</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8c_source.html#l00111">semaphore.c:111</a></div></div>
<div class="ttc" id="asemaphore_8h_html_a4f55194fa0cf1c54967f7ac6cfb87468"><div class="ttname"><a href="semaphore_8h.html#a4f55194fa0cf1c54967f7ac6cfb87468">SEMAPHORE_NO_TOKENS</a></div><div class="ttdeci">#define SEMAPHORE_NO_TOKENS</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8h_source.html#l00048">semaphore.h:48</a></div></div>
<div class="ttc" id="asemaphore_8h_html_ac23e043f8f6298da52cd02e08ee7a60a"><div class="ttname"><a href="semaphore_8h.html#ac23e043f8f6298da52cd02e08ee7a60a">SEMAPHORE_SUCCESS</a></div><div class="ttdeci">#define SEMAPHORE_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8h_source.html#l00046">semaphore.h:46</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a01ac645deea22e3d4deaef4d5ed40e02"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a01ac645deea22e3d4deaef4d5ed40e02">kernel_event_receive_timeout</a></div><div class="ttdeci">size_t kernel_event_receive_timeout(size_t *received_events)</div><div class="ttdoc">Tries to receive events until a previously set timeout was reached.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01313">kernel.c:1313</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a02020ffe19a15a0e6a9434c637d8a1ca"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a02020ffe19a15a0e6a9434c637d8a1ca">kernel_message_queue_receive</a></div><div class="ttdeci">size_t kernel_message_queue_receive(message_queue_identifier_t **message_queue_identifier, void **message)</div><div class="ttdoc">Receive a message or will be blocked until a message was received.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00668">kernel.c:668</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a0af8b83c448299a32985cf85b970a9be"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a0af8b83c448299a32985cf85b970a9be">g_linked_list_task_iterator_next</a></div><div class="ttdeci">linked_list_element_t * g_linked_list_task_iterator_next</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00069">kernel.c:69</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a105788c2e945106a04bcc0ae7dada0e2"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a105788c2e945106a04bcc0ae7dada0e2">g_dictionary_priority_next</a></div><div class="ttdeci">uint8_t g_dictionary_priority_next</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00064">kernel.c:64</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a15059a2c1786224f9d8b8f357af1d131"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a15059a2c1786224f9d8b8f357af1d131">kernel_message_queue_delete</a></div><div class="ttdeci">size_t kernel_message_queue_delete(message_queue_identifier_t **message_queue_identifier)</div><div class="ttdoc">Deletes a message queue.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00531">kernel.c:531</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a162d941d58f7afe1f3202d798d6fdbac"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a162d941d58f7afe1f3202d798d6fdbac">kernel_start</a></div><div class="ttdeci">size_t kernel_start(void)</div><div class="ttdoc">Starts the kernel with the previous added tasks. Is able to start multiple tasks, if the system suppo...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00377">kernel.c:377</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a18a398451b2dd94649e809bf3b1a0a56"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a18a398451b2dd94649e809bf3b1a0a56">g_semaphore_list</a></div><div class="ttdeci">dictionary_t * g_semaphore_list</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00092">kernel.c:92</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a19b0d9e91fa292e1c48d8fa95b77b928"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a19b0d9e91fa292e1c48d8fa95b77b928">g_priority_group_current</a></div><div class="ttdeci">linked_list_t * g_priority_group_current</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00073">kernel.c:73</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a1ca4314a6412565954da7439e0aa13cc"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a1ca4314a6412565954da7439e0aa13cc">g_linked_list_task_iterator</a></div><div class="ttdeci">linked_list_element_t * g_linked_list_task_iterator</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00068">kernel.c:68</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a2572802acfcff0cee22b826a2b7eeed8"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a2572802acfcff0cee22b826a2b7eeed8">kernel_swap_task</a></div><div class="ttdeci">size_t kernel_swap_task(linked_list_t **priority_group, linked_list_element_t **linked_list_element, task_t **task)</div><div class="ttdoc">It is called by the current running task, which shall be blocked. Before it is blocked it might need ...</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00231">kernel.c:231</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a269a52e775212b39ab9b36749e8c784f"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a269a52e775212b39ab9b36749e8c784f">g_priority_group_next</a></div><div class="ttdeci">linked_list_t * g_priority_group_next</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00074">kernel.c:74</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a2e52dedad3cf7d714060e64727c82aa6"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a2e52dedad3cf7d714060e64727c82aa6">kernel_set_stack_pointer</a></div><div class="ttdeci">size_t kernel_set_stack_pointer(void)</div><div class="ttdoc">Set psp to a valid memory location to preset memory address.</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00443">kernel.c:443</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a303f92a941c5493399c334cdb3ee468d"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a303f92a941c5493399c334cdb3ee468d">g_available_tasks</a></div><div class="ttdeci">size_t g_available_tasks</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00085">kernel.c:85</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a315ae0051d7a92cfb9ca73cce439df9c"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a315ae0051d7a92cfb9ca73cce439df9c">kernel_message_queue_send</a></div><div class="ttdeci">size_t kernel_message_queue_send(message_queue_identifier_t **message_queue_identifier, void *message, size_t element_size, bool urgent)</div><div class="ttdoc">Sends a message to a task or stores a message in the message queue.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00564">kernel.c:564</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a32c6a247d7774b1962eafa56fd521dd7"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a32c6a247d7774b1962eafa56fd521dd7">g_dictionary_priority</a></div><div class="ttdeci">uint8_t g_dictionary_priority</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00063">kernel.c:63</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a386da6986ffb8bb1fb9edce1e56b3f2e"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a386da6986ffb8bb1fb9edce1e56b3f2e">g_blocked_tasks</a></div><div class="ttdeci">linked_list_t * g_blocked_tasks</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00102">kernel.c:102</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a3d9047069d860f02991ff83e7e29a4f8"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a3d9047069d860f02991ff83e7e29a4f8">kernel_delay</a></div><div class="ttdeci">size_t kernel_delay(size_t delay_millisecods)</div><div class="ttdoc">Delays the task by the amount in milliseconds.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01235">kernel.c:1235</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a411f833deee2f1cab183e806f2bb4801"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a411f833deee2f1cab183e806f2bb4801">kernel_mutex_release_non_blocking</a></div><div class="ttdeci">size_t kernel_mutex_release_non_blocking(size_t id)</div><div class="ttdoc">Release a mutex to exit a critical section. Does not manage the waiting list or blocked tasks.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01198">kernel.c:1198</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a472c4d53be91c685dd0f13bd44b548bc"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a472c4d53be91c685dd0f13bd44b548bc">kernel_reinsert_task</a></div><div class="ttdeci">size_t kernel_reinsert_task(linked_list_t **source, linked_list_element_t **element, task_t **task)</div><div class="ttdoc">Moves a task from blocked to running task list.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01599">kernel.c:1599</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a4bd2210dccfc7c855768a0a9260392a4"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a4bd2210dccfc7c855768a0a9260392a4">kernel_mutex_acquire</a></div><div class="ttdeci">size_t kernel_mutex_acquire(size_t id)</div><div class="ttdoc">Acquires a mutex to enter a critical section. The task will try to acquire the mutex and will be bloc...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01060">kernel.c:1060</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a4dafd2415b509bfd514d0eecd41aa318"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a4dafd2415b509bfd514d0eecd41aa318">kernel_exit_to_scheduler</a></div><div class="ttdeci">size_t kernel_exit_to_scheduler(void)</div><div class="ttdoc">It will force to start a next task.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01552">kernel.c:1552</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a56123615f2ddd1773bbcde4488096ab4"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a56123615f2ddd1773bbcde4488096ab4">g_message_queue_ids</a></div><div class="ttdeci">size_t g_message_queue_ids</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00089">kernel.c:89</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a5746ccdf49feebb5f657259a3b797c55"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a5746ccdf49feebb5f657259a3b797c55">g_mutex_list</a></div><div class="ttdeci">dictionary_t * g_mutex_list</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00096">kernel.c:96</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a5cd10a094ccc1303513ef222e35bfec4"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a5cd10a094ccc1303513ef222e35bfec4">g_running_task_current</a></div><div class="ttdeci">task_t * g_running_task_current</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00057">kernel.c:57</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a665f619e96b79dc103318b9bb9d593ee"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a665f619e96b79dc103318b9bb9d593ee">g_list_of_tasks</a></div><div class="ttdeci">dictionary_t * g_list_of_tasks</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00075">kernel.c:75</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a674a82b03f5c545da5ece7cb351e225c"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a674a82b03f5c545da5ece7cb351e225c">kernel_semaphore_acquire_non_blocking</a></div><div class="ttdeci">size_t kernel_semaphore_acquire_non_blocking(size_t id)</div><div class="ttdoc">Acquires a semaphore to enter a critical section. The task will try to acquire the semaphore and retu...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00886">kernel.c:886</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a67ba865ed8e4f4f8b172f03bc702ce02"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a67ba865ed8e4f4f8b172f03bc702ce02">kernel_mutex_create</a></div><div class="ttdeci">size_t kernel_mutex_create(size_t *id)</div><div class="ttdoc">Creates a mutex to block other tasks from entering a protected section.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00993">kernel.c:993</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a6b3e7eb90f3effc2d59aedaff123dff5"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a6b3e7eb90f3effc2d59aedaff123dff5">kernel_deinit</a></div><div class="ttdeci">size_t kernel_deinit(void)</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00203">kernel.c:203</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a6bef4ee0a9574d077bf42797c46ed4ce"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a6bef4ee0a9574d077bf42797c46ed4ce">kernel_semaphore_release</a></div><div class="ttdeci">size_t kernel_semaphore_release(size_t id)</div><div class="ttdoc">Releases a semaphore to exit a critical section. On every release a task will be moved to its corresp...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00839">kernel.c:839</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a6e3a882f432c89fd5599f82167877100"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a6e3a882f432c89fd5599f82167877100">g_delayed_tasks</a></div><div class="ttdeci">linked_list_t * g_delayed_tasks</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00076">kernel.c:76</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a6ebc25016cb85b109c3aec7f56cfb538"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a6ebc25016cb85b109c3aec7f56cfb538">kernel_event_send</a></div><div class="ttdeci">size_t kernel_event_send(size_t task_id, size_t event)</div><div class="ttdoc">Send events to tasks.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01483">kernel.c:1483</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a729cb0cadb1d43c7f3e7d3159822cca8"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a729cb0cadb1d43c7f3e7d3159822cca8">kernel_mutex_release</a></div><div class="ttdeci">size_t kernel_mutex_release(size_t id)</div><div class="ttdoc">Releases a mutex to exit a critical section. On every release a task will be moved to its correspondi...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01110">kernel.c:1110</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a7901950415e33fca551eaf4d1653ed13"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a7901950415e33fca551eaf4d1653ed13">g_running_task_next</a></div><div class="ttdeci">task_t * g_running_task_next</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00058">kernel.c:58</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a7dc0730fdfa63247d899c6dae2681da0"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a7dc0730fdfa63247d899c6dae2681da0">g_terminated_tasks_list</a></div><div class="ttdeci">linked_list_t * g_terminated_tasks_list</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00103">kernel.c:103</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a82d3d38923c236ae08d1e1171ef761db"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a82d3d38923c236ae08d1e1171ef761db">kernel_start_task</a></div><div class="ttdeci">size_t kernel_start_task(linked_list_t **priority_group, linked_list_element_t **linked_list_element, task_t **task)</div><div class="ttdoc">Start the provided task and updates global information to the task by triggering kernel_schedule_task...</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00291">kernel.c:291</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a8ad9817417ac78418fcc96c0b9ddb5e3"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a8ad9817417ac78418fcc96c0b9ddb5e3">g_prioritized_tasks</a></div><div class="ttdeci">dictionary_t * g_prioritized_tasks</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00071">kernel.c:71</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a8c11a56a5de987e7e13ad84524a0c975"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a8c11a56a5de987e7e13ad84524a0c975">kernel_semaphore_release_non_blocking</a></div><div class="ttdeci">size_t kernel_semaphore_release_non_blocking(size_t id)</div><div class="ttdoc">Releases a semaphore to exit a critical section. Does not access the waiting list.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00927">kernel.c:927</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_a8d36513dfa683ef9c3746f27d4aac0e4"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#a8d36513dfa683ef9c3746f27d4aac0e4">kernel_semaphore_create</a></div><div class="ttdeci">size_t kernel_semaphore_create(size_t *id, size_t tokens)</div><div class="ttdoc">Creates a semaphore to block other tasks from entering a protected section.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00723">kernel.c:723</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_aa1371c130a205b07458651290a56bdd0"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#aa1371c130a205b07458651290a56bdd0">kernel_message_queue_send_blocking</a></div><div class="ttdeci">size_t kernel_message_queue_send_blocking(message_queue_identifier_t **message_queue_identifier, void *message, size_t element_size, bool urgent)</div><div class="ttdoc">Sends a message to a task or stores a message in the message queue. The sender can be blocked.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00614">kernel.c:614</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_aae2d2023cb28a5659d68f4d4e5e0d41a"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#aae2d2023cb28a5659d68f4d4e5e0d41a">kernel_message_queue_create</a></div><div class="ttdeci">size_t kernel_message_queue_create(message_queue_identifier_t **message_queue_identifier, char *name, size_t queue_size, size_t element_size)</div><div class="ttdoc">Create a new message queue for interprocess communication.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00496">kernel.c:496</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ab44318353dff0f640cad55def566826d"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ab44318353dff0f640cad55def566826d">kernel_semaphore_acquire</a></div><div class="ttdeci">size_t kernel_semaphore_acquire(size_t id)</div><div class="ttdoc">Acquires a semaphore to enter a critical section. The task will try to acquire the semaphore and will...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00789">kernel.c:789</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ab7526169fb1376f757c464e93703a83e"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ab7526169fb1376f757c464e93703a83e">g_kernel_status</a></div><div class="ttdeci">Kernel_Status_e g_kernel_status</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00060">kernel.c:60</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ab88bff7bcf44ed09a75fc5a42d14ef30"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ab88bff7bcf44ed09a75fc5a42d14ef30">kernel_mutex_delete</a></div><div class="ttdeci">size_t kernel_mutex_delete(size_t *id)</div><div class="ttdoc">Deletes an existing mutex.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01028">kernel.c:1028</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ab9e9375067ac5af75d44af18d1b400d6"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ab9e9375067ac5af75d44af18d1b400d6">g_mutex_ids</a></div><div class="ttdeci">size_t g_mutex_ids</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00097">kernel.c:97</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_abb40fc691b0a83f09450a1e8b279147f"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#abb40fc691b0a83f09450a1e8b279147f">kernel_event_receive_blocking</a></div><div class="ttdeci">size_t kernel_event_receive_blocking(size_t *received_events)</div><div class="ttdoc">Tries to receive events until the events are set.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01429">kernel.c:1429</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ac0574125de4d9f0106c455266d2f56a6"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ac0574125de4d9f0106c455266d2f56a6">kernel_toggle_critical_section</a></div><div class="ttdeci">void kernel_toggle_critical_section(void)</div><div class="ttdoc">Toggle a critical section to prevent a task switch. @info It allows atomic operations.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01579">kernel.c:1579</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ac27d4440da0880ea8d551dbf82a88a58"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ac27d4440da0880ea8d551dbf82a88a58">kernel_set_status</a></div><div class="ttdeci">size_t kernel_set_status(Kernel_Status_e status)</div><div class="ttdoc">Set the kernel status depending on the kernel state. It blocks when an allowed state should be entere...</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00410">kernel.c:410</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ac3165bd16367b2848c66446d60ee5762"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ac3165bd16367b2848c66446d60ee5762">g_task_lowest_priority</a></div><div class="ttdeci">size_t g_task_lowest_priority</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00081">kernel.c:81</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ad7cc8dd7d3cf63ec6025a69776d4dcd7"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ad7cc8dd7d3cf63ec6025a69776d4dcd7">kernel_mutex_acquire_non_blocking</a></div><div class="ttdeci">size_t kernel_mutex_acquire_non_blocking(size_t id)</div><div class="ttdoc">Acquires a mutex to enter a critical section. The task will try to acquire the mutex and returns,...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l01157">kernel.c:1157</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ae92a818de2bb3a511f7add951f4c053a"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ae92a818de2bb3a511f7add951f4c053a">kernel_semaphore_is_available</a></div><div class="ttdeci">size_t kernel_semaphore_is_available(size_t id)</div><div class="ttdoc">Checks if a semaphore is avaialable for acquiring.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00965">kernel.c:965</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_ae95babde8b304cecd735495103f57d0b"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#ae95babde8b304cecd735495103f57d0b">kernel_add_task</a></div><div class="ttdeci">size_t kernel_add_task(size_t(*task_main)(void), uint8_t u8_task_id, const char *task_name, uint8_t u8_task_priority, size_t time_quantum, size_t wanted_events, void(*notification_conditions)(size_t *, size_t), size_t timeout)</div><div class="ttdoc">Inserts a new task to be executed on kernel start.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00322">kernel.c:322</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_aec0bced571e65dd4a100363886119ca2"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#aec0bced571e65dd4a100363886119ca2">kernel_init</a></div><div class="ttdeci">size_t kernel_init(void)</div><div class="ttdoc">Initializes the kernel and prepares required structures. Call this function first before any kernel u...</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00134">kernel.c:134</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_aec518d3192ce8c25705b52ffd17b7de8"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#aec518d3192ce8c25705b52ffd17b7de8">kernel_semaphore_delete</a></div><div class="ttdeci">size_t kernel_semaphore_delete(size_t *id)</div><div class="ttdoc">Deletes an existing semaphore.</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00757">kernel.c:757</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_aecc1d7602ec2800fcdc0d31d35a7a379"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#aecc1d7602ec2800fcdc0d31d35a7a379">kernel_set_system_functions</a></div><div class="ttdeci">void kernel_set_system_functions(void)</div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_af0b12129cd39d874bfebcc424b723b5d"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#af0b12129cd39d874bfebcc424b723b5d">kernel_task_terminate</a></div><div class="ttdeci">void kernel_task_terminate(void)</div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_af1eced3da5e3a09ad47574f9caae2d8a"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#af1eced3da5e3a09ad47574f9caae2d8a">g_kernel_critical_section_active</a></div><div class="ttdeci">bool g_kernel_critical_section_active</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00101">kernel.c:101</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_af2a34ea23217c5e3ac0f09b2fe9802cd"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#af2a34ea23217c5e3ac0f09b2fe9802cd">g_task_lower_priority</a></div><div class="ttdeci">size_t g_task_lower_priority</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00080">kernel.c:80</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_af63543f7a4980913510095ef737e2178"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#af63543f7a4980913510095ef737e2178">g_semaphore_ids</a></div><div class="ttdeci">size_t g_semaphore_ids</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00093">kernel.c:93</a></div></div>
<div class="ttc" id="asrc_2kernel_2kernel_8c_html_afc007d23bf7c517682f1316b5737552a"><div class="ttname"><a href="src_2kernel_2kernel_8c.html#afc007d23bf7c517682f1316b5737552a">g_message_queue_list</a></div><div class="ttdeci">dictionary_t * g_message_queue_list</div><div class="ttdef"><b>Definition</b> <a href="src_2kernel_2kernel_8c_source.html#l00088">kernel.c:88</a></div></div>
<div class="ttc" id="astm_2kernel_2kernel_8c_html_a01d4886f9d86ae45f1194ce65a617c0f"><div class="ttname"><a href="stm_2kernel_2kernel_8c.html#a01d4886f9d86ae45f1194ce65a617c0f">kernel_enable_interrupts</a></div><div class="ttdeci">void kernel_enable_interrupts(void)</div><div class="ttdoc">Enables interrupts.</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00562">kernel.c:562</a></div></div>
<div class="ttc" id="astm_2kernel_2kernel_8c_html_ad0710a90c578c112db22235646936a20"><div class="ttname"><a href="stm_2kernel_2kernel_8c.html#ad0710a90c578c112db22235646936a20">kernel_disable_interrupts</a></div><div class="ttdeci">void kernel_disable_interrupts(void)</div><div class="ttdoc">Disables interrupts.</div><div class="ttdef"><b>Definition</b> <a href="stm_2kernel_2kernel_8c_source.html#l00554">kernel.c:554</a></div></div>
<div class="ttc" id="astructTCB__sctTCB__t_html_ab010baa4ac75ac6c7af73de0da2774d0"><div class="ttname"><a href="structTCB__sctTCB__t.html#ab010baa4ac75ac6c7af73de0da2774d0">TCB_sctTCB_t::eTaskState</a></div><div class="ttdeci">TCB_eTastStates_t eTaskState</div><div class="ttdoc">the tasks state</div><div class="ttdef"><b>Definition</b> <a href="tcb_8h_source.html#l00037">tcb.h:37</a></div></div>
<div class="ttc" id="astructdictionary__t_html"><div class="ttname"><a href="structdictionary__t.html">dictionary_t</a></div><div class="ttdef"><b>Definition</b> <a href="dictionary_8h_source.html#l00042">dictionary.h:42</a></div></div>
<div class="ttc" id="astructelement_html"><div class="ttname"><a href="structelement.html">element</a></div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00069">linked_list.h:69</a></div></div>
<div class="ttc" id="astructelement_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="structelement.html#a735984d41155bc1032e09bece8f8d66d">element::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00071">linked_list.h:71</a></div></div>
<div class="ttc" id="astructelement_html_abce5214d804268256bdbe35b1009c2c6"><div class="ttname"><a href="structelement.html#abce5214d804268256bdbe35b1009c2c6">element::previous</a></div><div class="ttdeci">struct element * previous</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00073">linked_list.h:73</a></div></div>
<div class="ttc" id="astructelement_html_ad6c8fbd54a667cc66ac1b130f0083081"><div class="ttname"><a href="structelement.html#ad6c8fbd54a667cc66ac1b130f0083081">element::next</a></div><div class="ttdeci">struct element * next</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00075">linked_list.h:75</a></div></div>
<div class="ttc" id="astructevent__register__t_html_a0cce97ea104e155533c6c5011884b4f2"><div class="ttname"><a href="structevent__register__t.html#a0cce97ea104e155533c6c5011884b4f2">event_register_t::wanted_events</a></div><div class="ttdeci">size_t wanted_events</div><div class="ttdoc">wanted events for a task</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00051">task.h:51</a></div></div>
<div class="ttc" id="astructevent__register__t_html_a8321c8d1dcb982b1a3a635e50ec7874f"><div class="ttname"><a href="structevent__register__t.html#a8321c8d1dcb982b1a3a635e50ec7874f">event_register_t::timeout</a></div><div class="ttdeci">size_t timeout</div><div class="ttdoc">event receive timeout</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00054">task.h:54</a></div></div>
<div class="ttc" id="astructevent__register__t_html_aaf68941f7d9974e32edb2a895d8ffec5"><div class="ttname"><a href="structevent__register__t.html#aaf68941f7d9974e32edb2a895d8ffec5">event_register_t::notification_conditions</a></div><div class="ttdeci">void(* notification_conditions)(size_t *, size_t)</div><div class="ttdoc">notification condition for complex comunication</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00053">task.h:53</a></div></div>
<div class="ttc" id="astructevent__register__t_html_af4abd82c1fc43110978e77ff3b2c4591"><div class="ttname"><a href="structevent__register__t.html#af4abd82c1fc43110978e77ff3b2c4591">event_register_t::received_events</a></div><div class="ttdeci">size_t received_events</div><div class="ttdoc">received events from tasks</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00052">task.h:52</a></div></div>
<div class="ttc" id="astructlinked__list__t_html"><div class="ttname"><a href="structlinked__list__t.html">linked_list_t</a></div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00079">linked_list.h:79</a></div></div>
<div class="ttc" id="astructlinked__list__t_html_a387acc4799713fa6aa7614762928c785"><div class="ttname"><a href="structlinked__list__t.html#a387acc4799713fa6aa7614762928c785">linked_list_t::tail</a></div><div class="ttdeci">linked_list_element_t * tail</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00083">linked_list.h:83</a></div></div>
<div class="ttc" id="astructlinked__list__t_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="structlinked__list__t.html#a854352f53b148adc24983a58a1866d66">linked_list_t::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00085">linked_list.h:85</a></div></div>
<div class="ttc" id="astructlinked__list__t_html_ac5bdd5414578d52c132ddbbbda1aa162"><div class="ttname"><a href="structlinked__list__t.html#ac5bdd5414578d52c132ddbbbda1aa162">linked_list_t::head</a></div><div class="ttdeci">linked_list_element_t * head</div><div class="ttdef"><b>Definition</b> <a href="linked__list_8h_source.html#l00081">linked_list.h:81</a></div></div>
<div class="ttc" id="astructmessage__queue__identifier__t_html"><div class="ttname"><a href="structmessage__queue__identifier__t.html">message_queue_identifier_t</a></div><div class="ttdoc">control information the message queue identifier</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00071">message_queue.h:71</a></div></div>
<div class="ttc" id="astructmessage__queue__t_html"><div class="ttname"><a href="structmessage__queue__t.html">message_queue_t</a></div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00077">message_queue.h:77</a></div></div>
<div class="ttc" id="astructmessage__queue__t_html_a32adb002bd2939d1ad38bb4385d5acb7"><div class="ttname"><a href="structmessage__queue__t.html#a32adb002bd2939d1ad38bb4385d5acb7">message_queue_t::receiving_task_list</a></div><div class="ttdeci">linked_list_t * receiving_task_list</div><div class="ttdoc">linked list for storing blocked receiving tasks</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00080">message_queue.h:80</a></div></div>
<div class="ttc" id="astructmessage__queue__t_html_a4baa9892cf26b8f8e7f8b543d5884656"><div class="ttname"><a href="structmessage__queue__t.html#a4baa9892cf26b8f8e7f8b543d5884656">message_queue_t::message_queue_identifier</a></div><div class="ttdeci">message_queue_identifier_t * message_queue_identifier</div><div class="ttdoc">message queues identifier</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00078">message_queue.h:78</a></div></div>
<div class="ttc" id="astructmessage__queue__t_html_a6005a7d3f1fa1707920743fa2efe0869"><div class="ttname"><a href="structmessage__queue__t.html#a6005a7d3f1fa1707920743fa2efe0869">message_queue_t::sending_task_list</a></div><div class="ttdeci">linked_list_t * sending_task_list</div><div class="ttdoc">linked list for storing blocked sending tasks</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8h_source.html#l00081">message_queue.h:81</a></div></div>
<div class="ttc" id="astructmutex__t_html"><div class="ttname"><a href="structmutex__t.html">mutex_t</a></div><div class="ttdoc">control information for a mutex</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00051">mutex.h:51</a></div></div>
<div class="ttc" id="astructmutex__t_html_a1f98447d6499761302bced3bffa03c12"><div class="ttname"><a href="structmutex__t.html#a1f98447d6499761302bced3bffa03c12">mutex_t::binary_semaphore</a></div><div class="ttdeci">semaphore_t * binary_semaphore</div><div class="ttdoc">mutexes binary semaphore</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00052">mutex.h:52</a></div></div>
<div class="ttc" id="astructsemaphore__t_html"><div class="ttname"><a href="structsemaphore__t.html">semaphore_t</a></div><div class="ttdoc">&lt; control information for a semaphore</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8h_source.html#l00065">semaphore.h:65</a></div></div>
<div class="ttc" id="astructsemaphore__t_html_aa4aae50c92749c22526a9deab83c485b"><div class="ttname"><a href="structsemaphore__t.html#aa4aae50c92749c22526a9deab83c485b">semaphore_t::task_waiting_list</a></div><div class="ttdeci">linked_list_t * task_waiting_list</div><div class="ttdoc">linked list for storing blocked tasks</div><div class="ttdef"><b>Definition</b> <a href="semaphore_8h_source.html#l00069">semaphore.h:69</a></div></div>
<div class="ttc" id="astructtask__t_html"><div class="ttname"><a href="structtask__t.html">task_t</a></div><div class="ttdoc">control information for a task</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00058">task.h:58</a></div></div>
<div class="ttc" id="astructtask__t_html_a067b2eb2540e3ef6262bcc57a52034d8"><div class="ttname"><a href="structtask__t.html#a067b2eb2540e3ef6262bcc57a52034d8">task_t::blocked_timeout_list</a></div><div class="ttdeci">linked_list_t * blocked_timeout_list</div><div class="ttdoc">shows in which waiting list the task was stored, if receiving events</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00070">task.h:70</a></div></div>
<div class="ttc" id="astructtask__t_html_a1fb5ad058d827429ec22745171fcd22b"><div class="ttname"><a href="structtask__t.html#a1fb5ad058d827429ec22745171fcd22b">task_t::task_data</a></div><div class="ttdeci">TCB_sctTCB_t * task_data</div><div class="ttdoc">tasks data</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00059">task.h:59</a></div></div>
<div class="ttc" id="astructtask__t_html_a21c3a4ee7d6c63fdfaec962ed9bedcf4"><div class="ttname"><a href="structtask__t.html#a21c3a4ee7d6c63fdfaec962ed9bedcf4">task_t::event_register</a></div><div class="ttdeci">event_register_t event_register</div><div class="ttdoc">tasks event register</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00069">task.h:69</a></div></div>
<div class="ttc" id="astructtask__t_html_a8db1884c2715f8ec274fe811f5f1fe59"><div class="ttname"><a href="structtask__t.html#a8db1884c2715f8ec274fe811f5f1fe59">task_t::delta_time</a></div><div class="ttdeci">size_t delta_time</div><div class="ttdoc">tasks delta time, if blocked and stored in a separate waiting list</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00068">task.h:68</a></div></div>
<div class="ttc" id="astructtask__t_html_ab93d4d26491a69f1f649b94abb7e0c15"><div class="ttname"><a href="structtask__t.html#ab93d4d26491a69f1f649b94abb7e0c15">task_t::blocked_timeout_list_element</a></div><div class="ttdeci">linked_list_element_t * blocked_timeout_list_element</div><div class="ttdoc">is the linked list element in a separate waiting list, if receiving events</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00071">task.h:71</a></div></div>
<div class="ttc" id="asupport_8h_html"><div class="ttname"><a href="support_8h.html">support.h</a></div><div class="ttdoc">: Module for useful macros</div></div>
<div class="ttc" id="asupport_8h_html_ac4761c739aba1968a75152accb369dc2"><div class="ttname"><a href="support_8h.html#ac4761c739aba1968a75152accb369dc2">ERROR_INFO</a></div><div class="ttdeci">#define ERROR_INFO(sub_component_status, component_register, component_status)</div><div class="ttdef"><b>Definition</b> <a href="support_8h_source.html#l00039">support.h:39</a></div></div>
<div class="ttc" id="atask_8c_html_a01484528b00ba93895b706ea4a029302"><div class="ttname"><a href="task_8c.html#a01484528b00ba93895b706ea4a029302">task_checking</a></div><div class="ttdeci">size_t task_checking(task_t **task)</div><div class="ttdoc">Checks whether a task is valid.</div><div class="ttdef"><b>Definition</b> <a href="task_8c_source.html#l00254">task.c:254</a></div></div>
<div class="ttc" id="atask_8c_html_a4b17855147c0cc7a3676e398b711bf09"><div class="ttname"><a href="task_8c.html#a4b17855147c0cc7a3676e398b711bf09">task_create</a></div><div class="ttdeci">size_t task_create(task_t **task, size_t(*task_main)(void), void(*kernel_task_terminate)(void), uint8_t u8_task_id, const char *task_name, uint8_t u8_task_priority, size_t time_quantum, size_t wanted_events, void(*notification_conditions)(size_t *, size_t), size_t timeout)</div><div class="ttdoc">Creates a task and fills the its structure with all of the necessary control information.</div><div class="ttdef"><b>Definition</b> <a href="task_8c_source.html#l00060">task.c:60</a></div></div>
<div class="ttc" id="atask_8c_html_a86c610c32b85a985b4e626192a4ad6dc"><div class="ttname"><a href="task_8c.html#a86c610c32b85a985b4e626192a4ad6dc">task_set_priority</a></div><div class="ttdeci">size_t task_set_priority(task_t **task, uint8_t u8_task_priority)</div><div class="ttdoc">Sets a tasks priority. Note that a lower value signifies a higher priority.</div><div class="ttdef"><b>Definition</b> <a href="task_8c_source.html#l00212">task.c:212</a></div></div>
<div class="ttc" id="atask_8c_html_a993e35de544bf050671e5de34a227697"><div class="ttname"><a href="task_8c.html#a993e35de544bf050671e5de34a227697">task_set_blocked_info</a></div><div class="ttdeci">size_t task_set_blocked_info(task_t **task, linked_list_t **blocked_timeout_list, linked_list_element_t **blocked_timeout_list_element)</div><div class="ttdoc">Sets a tasks current blocked information, showing which list it belongs to.</div><div class="ttdef"><b>Definition</b> <a href="task_8c_source.html#l00234">task.c:234</a></div></div>
<div class="ttc" id="atask_8c_html_aba2c0017fce23775355c8c24f4c1bf96"><div class="ttname"><a href="task_8c.html#aba2c0017fce23775355c8c24f4c1bf96">task_delete</a></div><div class="ttdeci">size_t task_delete(task_t **task)</div><div class="ttdoc">Deletes an existing task.</div><div class="ttdef"><b>Definition</b> <a href="task_8c_source.html#l00129">task.c:129</a></div></div>
<div class="ttc" id="atask_8c_html_adda51d8ef0b37521b25acb7d883a01c4"><div class="ttname"><a href="task_8c.html#adda51d8ef0b37521b25acb7d883a01c4">task_set_state</a></div><div class="ttdeci">size_t task_set_state(task_t **task, TCB_eTastStates_t task_state)</div><div class="ttdoc">Sets a tasks state. Most useful for tracking multiple tasks in SEGGER SystemView.</div><div class="ttdef"><b>Definition</b> <a href="task_8c_source.html#l00158">task.c:158</a></div></div>
<div class="ttc" id="atask_8h_html_a3fe16c8f3d0c2cf422fa1097ad76accb"><div class="ttname"><a href="task_8h.html#a3fe16c8f3d0c2cf422fa1097ad76accb">TASK_MAX_PRIORITY</a></div><div class="ttdeci">#define TASK_MAX_PRIORITY</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00045">task.h:45</a></div></div>
<div class="ttc" id="atask_8h_html_a4212f1199f698442e7ce6237b161f078"><div class="ttname"><a href="task_8h.html#a4212f1199f698442e7ce6237b161f078">TASK_SUCCESS</a></div><div class="ttdeci">#define TASK_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00040">task.h:40</a></div></div>
<div class="ttc" id="atcb_8h_html_a528049fed79c5587395da2377d5d0570a598fa38161223df5b42408a475799a53"><div class="ttname"><a href="tcb_8h.html#a528049fed79c5587395da2377d5d0570a598fa38161223df5b42408a475799a53">TaskState_Ready</a></div><div class="ttdeci">@ TaskState_Ready</div><div class="ttdoc">Indicates that a task is ready and could be selected by the scheduler.</div><div class="ttdef"><b>Definition</b> <a href="tcb_8h_source.html#l00023">tcb.h:23</a></div></div>
<div class="ttc" id="atcb_8h_html_a528049fed79c5587395da2377d5d0570ace7df1fea4c86c0a61fad5a3ddc599bc"><div class="ttname"><a href="tcb_8h.html#a528049fed79c5587395da2377d5d0570ace7df1fea4c86c0a61fad5a3ddc599bc">TaskState_Running</a></div><div class="ttdeci">@ TaskState_Running</div><div class="ttdoc">Indicates that a task is currently running and using CPU resources.</div><div class="ttdef"><b>Definition</b> <a href="tcb_8h_source.html#l00024">tcb.h:24</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_cbd7f246bdf7dc0a50281a272327e6ed.html">kernel</a></li><li class="navelem"><a class="el" href="src_2kernel_2kernel_8c.html">kernel.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
