<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>realtime_library: EZS_SS25</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">realtime_library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">EZS_SS25 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2media_2sf__ezs__ss25_2README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Import library</h1>
<ul>
<li>load realtime_library as project to workspace<ul>
<li>open 'File -&gt; Open Projects from File System'</li>
<li>import source choose directory containing the realtime library (not the realtime library directory)</li>
<li>select realtime_library</li>
</ul>
</li>
<li>include and source<ul>
<li>includes<ul>
<li>open project properties</li>
<li>open 'C/C++ General -&gt; Paths and Symbols -&gt; Includes'</li>
<li>add following files as workspace path<ul>
<li>'realtime_library/include' =&gt; library</li>
<li>'realtime_library/test/test_stm' =&gt; for demonstrating the library</li>
</ul>
</li>
</ul>
</li>
<li>sources<ul>
<li>open project properties</li>
<li>open 'C/C++ General -&gt; Paths and Symbols -&gt; Source Location'</li>
<li>link following folders in the filesystem:<ul>
<li>'realtime_library/src' =&gt; library</li>
<li>'realtime_library/stm' =&gt; library</li>
<li>'realtime_library/test/test_stm' =&gt; for demonstrating the library</li>
</ul>
</li>
</ul>
</li>
<li>segger<ul>
<li>define '#define SEGGER' in <a class="el" href="support_8h.html" title=": Module for useful macros">support.h</a> or open 'project properties -&gt; C/C++ General -&gt; Paths and Symbols -&gt; Symbols' and add SEGGER</li>
<li>add following files as workspace path<ul>
<li>'realtime_library/segger-sysview/Config</li>
<li>'realtime_library/segger-sysview/SEGGER</li>
</ul>
</li>
<li>link following sources in the filesystem:<ul>
<li>'realtime_library/segger-sysview'</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Architecture and Design Decision</h1>
<p>The realtime library uses pointers for all data structure to allow to move them to different lists.</p>
<p>The realtime_library/src/kernel.c implements independent kernel functions from the stm32 while realtime_library/stm/kernel.c implements depends on the stm32.</p>
<p>We are using linked list to allow for an infinite amount for tasks. Tasks can be stored in so called priority groups, which are just linked list. It means multiple tasks can have same priority and it is easy to implement priority inheritance. A complete priority group is moved up on every task switch. The linked list is capable of moving elements from a list to another list, which allows for O(1) operations.</p>
<p>The task struct acts as a layer to the task tcb struct, which contains contains control inforamtion, which helps to store necessary information for the kernel usage.</p>
<p>Kernel obejct were implemented based of <a href="https://www.taylorfrancis.com/books/mono/10.1201/9781482280821/real-time-concepts-embedded-systems-qing-li-caroline-yao">Real-Time Concepts for Embedded Systems</a></p>
<p>Normally all functions return an error code, which can be constructed based of subcomponents. It helps to see what problems occured and can be checked in their corresponding header file.</p>
<p>The documentation can be built with doxygen in realtime_library/docs. This requires the package 'graphviz' to be installed.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Testing</h1>
<p>To test basic subcompoents unit tests were created. To build unit tests you need <a href="https://cmake.org/">cmake</a> and <a href="https://criterion.readthedocs.io/en/master/intro.html">criterion</a> installed.</p>
<p>If the <a class="el" href="support_8h.html" title=": Module for useful macros">support.h</a> contains '#define SEGGER', the build will fail.</p>
<p>Build and run instructions: </p><pre class="fragment">- cd realtime_library
- mkdir build
- cmake ..
- cmake --build .
- ./test --verbose
</pre><p> Following result is expected: </p><pre class="fragment">[----] Criterion v2.4.1
[====] Running 2 tests from dictionary:
[====] Running 6 tests from linked_list:
[RUN ] dictionary::iteration
[RUN ] dictionary::null_operations
[PASS] dictionary::iteration: (0.00s)
[PASS] dictionary::null_operations: (0.00s)
[RUN ] linked_list::iteration
[PASS] linked_list::iteration: (0.01s)
[RUN ] linked_list::specified_element
[RUN ] linked_list::move_linked_list_after
[PASS] linked_list::specified_element: (0.00s)
[PASS] linked_list::move_linked_list_after: (0.00s)
[====] Running 3 tests from queue:
[RUN ] linked_list::null_operations
[RUN ] linked_list::transfer
[PASS] linked_list::null_operations: (0.00s)
[PASS] linked_list::transfer: (0.00s)
[RUN ] linked_list::transfer_after
[PASS] linked_list::transfer_after: (0.00s)
[RUN ] queue::iteration
[PASS] queue::iteration: (0.00s)
[RUN ] queue::queue_operations
[PASS] queue::queue_operations: (0.00s)
[RUN ] queue::null_operations
[PASS] queue::null_operations: (0.00s)
[====] Synthesis: Tested: 11 | Passing: 11 | Failing: 0 | Crashing: 0
</pre><p> Kernel test project:</p>
<p>Import segger-test2 as a project into workspace like with realtime_library.</p>
<p>To test kernel functions enable or disable them in test_task.h 1 for enable and 0 for disable. Set a breakpoint at <a class="el" href="src_2kernel_2kernel_8c.html#a162d941d58f7afe1f3202d798d6fdbac" title="Starts the kernel with the previous added tasks. Is able to start multiple tasks, if the system suppo...">kernel_start()</a> in test_tasks.c. If it is not set, segger systemviewer can miss some signals or task names are incorrect.</p>
<p>A monitoring task will update the stack usages roughly every second.</p>
<p>When pressing the user button a message can be send to a task and if pressed often enough an event is sent to a task to turn off the system.</p>
<p>More information can be found in realtime_library/docs/html/index.html. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
